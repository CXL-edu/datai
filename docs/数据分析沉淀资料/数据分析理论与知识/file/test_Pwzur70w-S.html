<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据分析知识库</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .content-wrapper {
            display: flex;
            min-height: 600px;
        }
        
        .sidebar {
            width: 300px;
            background: #f8f9fa;
            padding: 30px 20px;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
            max-height: 80vh;
        }
        
        .sidebar h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .menu-item {
            margin-bottom: 15px;
        }
        
        .menu-item > .menu-title {
            background: white;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #e0e0e0;
        }
        
        .menu-item > .menu-title:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }
        
        .menu-item > .menu-title.active {
            background: #667eea;
            color: white;
        }
        
        .arrow {
            transition: transform 0.3s;
            font-size: 0.8em;
        }
        
        .menu-item.expanded .arrow {
            transform: rotate(90deg);
        }
        
        .submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            margin-top: 5px;
        }
        
        .menu-item.expanded .submenu {
            max-height: 500px;
        }
        
        .submenu-item {
            padding: 8px 15px 8px 30px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .submenu-item:hover {
            background: #f0f0f0;
            border-left-color: #667eea;
        }
        
        .submenu-item.active {
            background: #e8eaf6;
            border-left-color: #667eea;
            font-weight: 500;
        }
        
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            max-height: 80vh;
        }
        
        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .content-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .content-section h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 2em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .content-section h3 {
            color: #764ba2;
            margin: 25px 0 15px;
            font-size: 1.5em;
        }
        
        .content-section h4 {
            color: #555;
            margin: 20px 0 10px;
            font-size: 1.2em;
        }
        
        .content-section p {
            margin-bottom: 15px;
            line-height: 1.8;
            color: #555;
        }
        
        .content-section ul {
            margin: 15px 0 15px 30px;
        }
        
        .content-section li {
            margin-bottom: 8px;
            color: #555;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        
        .example-box {
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .example-box h5 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-card h5 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .stat-card .number {
            font-size: 2em;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                max-height: none;
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
            }
            
            header h1 {
                font-size: 1.8em;
            }
            
            .main-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>📊 数据分析知识库</h1>
            <p>系统化的数据分析学习资源与实践指南</p>
        </header>
        
        <div class="content-wrapper">
            <aside class="sidebar">
                <h3>📚 知识目录</h3>
                <div id="menu"></div>
            </aside>
            
            <main class="main-content" id="mainContent">
                <!-- 动态内容将在这里加载 -->
            </main>
        </div>
    </div>
    
    <script>
        // 知识库数据结构
        const knowledgeBase = {
            "basics": {
                title: "数据分析基础",
                icon: "📈",
                subtopics: {
                    "concept": "数据分析概念与流程",
                    "types": "数据类型与结构",
                    "quality": "数据质量评估",
                    "thinking": "数据分析思维框架"
                },
                content: {
                    "concept": `
                        <h2>数据分析概念与流程</h2>
                        <p>数据分析是通过检查、清理、转换和建模数据来发现有用信息、得出结论并支持决策的过程。</p>
                        
                        <h3>核心概念</h3>
                        <p>数据分析涉及将原始数据转化为可操作的洞察，帮助组织做出明智的业务决策。</p>
                        
                        <h4>数据分析的主要步骤：</h4>
                        <ul>
                            <li><strong>问题定义：</strong>明确分析目标和业务问题</li>
                            <li><strong>数据收集：</strong>从各种来源获取相关数据</li>
                            <li><strong>数据清洗：</strong>处理缺失值、异常值和不一致性</li>
                            <li><strong>数据探索：</strong>理解数据特征和模式</li>
                            <li><strong>数据建模：</strong>应用统计和机器学习方法</li>
                            <li><strong>结果解释：</strong>将分析结果转化为业务洞察</li>
                            <li><strong>决策支持：</strong>基于数据提供建议和行动方案</li>
                        </ul>
                        
                        <div class="highlight-box">
                            <h4>🔑 关键要点</h4>
                            <p>成功的数据分析不仅需要技术技能，还需要业务理解、批判性思维和有效沟通能力。</p>
                        </div>
                        
                        <h3>数据分析类型</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h5>描述性分析</h5>
                                <div class="number">What</div>
                                <p>发生了什么</p>
                            </div>
                            <div class="stat-card">
                                <h5>诊断性分析</h5>
                                <div class="number">Why</div>
                                <p>为什么发生</p>
                            </div>
                            <div class="stat-card">
                                <h5>预测性分析</h5>
                                <div class="number">Will</div>
                                <p>将会发生什么</p>
                            </div>
                            <div class="stat-card">
                                <h5>规范性分析</h5>
                                <div class="number">How</div>
                                <p>应该怎么做</p>
                            </div>
                        </div>
                    `,
                    "types": `
                        <h2>数据类型与结构</h2>
                        <p>了解不同的数据类型和结构是进行有效数据分析的基础。</p>
                        
                        <h3>基本数据类型</h3>
                        
                        <h4>1. 定量数据（Quantitative）</h4>
                        <ul>
                            <li><strong>连续型数据：</strong>可以取任意值的数据（如温度、身高、收入）</li>
                            <li><strong>离散型数据：</strong>只能取特定值的数据（如人数、产品数量）</li>
                        </ul>
                        
                        <h4>2. 定性数据（Qualitative）</h4>
                        <ul>
                            <li><strong>名义型数据：</strong>无序分类数据（如性别、颜色、品牌）</li>
                            <li><strong>序数型数据：</strong>有序分类数据（如评级、教育程度）</li>
                        </ul>
                        
                        <h3>数据结构类型</h3>
                        
                        <div class="example-box">
                            <h5>📊 结构化数据</h5>
                            <p>组织在固定字段中的数据，通常存储在数据库表格中：</p>
                            <ul>
                                <li>关系型数据库（MySQL, PostgreSQL）</li>
                                <li>电子表格（Excel, CSV）</li>
                                <li>数据仓库</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>🔧 半结构化数据</h5>
                            <p>具有某种组织形式但不符合严格表格结构的数据：</p>
                            <ul>
                                <li>JSON文件</li>
                                <li>XML文档</li>
                                <li>日志文件</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>📝 非结构化数据</h5>
                            <p>没有预定义数据模型的数据：</p>
                            <ul>
                                <li>文本文档</li>
                                <li>图像和视频</li>
                                <li>音频文件</li>
                                <li>社交媒体内容</li>
                            </ul>
                        </div>
                        
                        <h3>数据维度</h3>
                        <p>数据的维度指的是数据集中的特征或变量数量：</p>
                        <ul>
                            <li><strong>一维数据：</strong>单个变量（如时间序列）</li>
                            <li><strong>二维数据：</strong>行和列的表格数据</li>
                            <li><strong>多维数据：</strong>包含多个属性的复杂数据集</li>
                        </ul>
                    `,
                    "quality": `
                        <h2>数据质量评估</h2>
                        <p>高质量的数据是准确分析和可靠决策的基础。数据质量评估帮助识别和解决数据问题。</p>
                        
                        <h3>数据质量维度</h3>
                        
                        <h4>1. 准确性（Accuracy）</h4>
                        <p>数据正确反映现实世界的程度。</p>
                        <ul>
                            <li>验证数据源的可靠性</li>
                            <li>交叉验证不同来源的数据</li>
                            <li>检查数据录入错误</li>
                        </ul>
                        
                        <h4>2. 完整性（Completeness）</h4>
                        <p>数据集中必要信息的完备程度。</p>
                        <ul>
                            <li>识别缺失值和空白字段</li>
                            <li>评估缺失数据的模式</li>
                            <li>确定可接受的完整性水平</li>
                        </ul>
                        
                        <h4>3. 一致性（Consistency）</h4>
                        <p>数据在不同系统和时间点的统一性。</p>
                        <ul>
                            <li>检查数据格式的标准化</li>
                            <li>验证业务规则的一致应用</li>
                            <li>识别重复或冲突的记录</li>
                        </ul>
                        
                        <h4>4. 时效性（Timeliness）</h4>
                        <p>数据的更新频率和时效性。</p>
                        <ul>
                            <li>评估数据的新鲜度</li>
                            <li>确定更新周期需求</li>
                            <li>监控数据延迟</li>
                        </ul>
                        
                        <h4>5. 相关性（Relevance）</h4>
                        <p>数据对特定分析目标的适用性。</p>
                        
                        <div class="highlight-box">
                            <h4>🔍 数据质量检查清单</h4>
                            <ul>
                                <li>✓ 数据范围是否合理？</li>
                                <li>✓ 是否存在异常值或离群点？</li>
                                <li>✓ 数据分布是否符合预期？</li>
                                <li>✓ 是否有重复记录？</li>
                                <li>✓ 数据类型是否正确？</li>
                                <li>✓ 引用完整性是否保持？</li>
                            </ul>
                        </div>
                        
                        <h3>数据质量改进策略</h3>
                        <div class="example-box">
                            <h5>预防措施</h5>
                            <ul>
                                <li>建立数据质量标准和规范</li>
                                <li>实施数据验证规则</li>
                                <li>培训数据录入人员</li>
                                <li>使用自动化数据收集工具</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>纠正措施</h5>
                            <ul>
                                <li>数据清洗和标准化</li>
                                <li>缺失值插补</li>
                                <li>异常值处理</li>
                                <li>数据去重</li>
                            </ul>
                        </div>
                    `,
                    "thinking": `
                        <h2>数据分析思维框架</h2>
                        <p>培养结构化的数据分析思维是成为优秀数据分析师的关键。</p>
                        
                        <h3>核心思维模式</h3>
                        
                        <h4>1. 假设驱动思维</h4>
                        <p>在分析前形成明确的假设，然后用数据验证或反驳。</p>
                        <ul>
                            <li>明确定义问题和假设</li>
                            <li>设计验证方法</li>
                            <li>收集相关数据</li>
                            <li>得出结论并迭代</li>
                        </ul>
                        
                        <h4>2. MECE原则</h4>
                        <p>Mutually Exclusive, Collectively Exhaustive - 相互独立，完全穷尽</p>
                        <ul>
                            <li>确保分析维度不重叠</li>
                            <li>覆盖所有可能的情况</li>
                            <li>建立清晰的分类体系</li>
                        </ul>
                        
                        <h4>3. 金字塔原理</h4>
                        <p>从结论开始，层层深入支撑论据。</p>
                        
                        <div class="highlight-box">
                            <h4>💡 分析思维框架</h4>
                            <p><strong>CRISP-DM模型：</strong></p>
                            <ul>
                                <li>业务理解（Business Understanding）</li>
                                <li>数据理解（Data Understanding）</li>
                                <li>数据准备（Data Preparation）</li>
                                <li>建模（Modeling）</li>
                                <li>评估（Evaluation）</li>
                                <li>部署（Deployment）</li>
                            </ul>
                        </div>
                        
                        <h3>批判性思维</h3>
                        
                        <h4>避免常见偏见</h4>
                        <ul>
                            <li><strong>确认偏见：</strong>只关注支持既有观点的数据</li>
                            <li><strong>幸存者偏见：</strong>忽略失败案例的分析</li>
                            <li><strong>相关性谬误：</strong>将相关性误认为因果关系</li>
                            <li><strong>样本偏见：</strong>样本不能代表总体</li>
                        </ul>
                        
                        <h3>问题解决框架</h3>
                        
                        <div class="example-box">
                            <h5>5W2H分析法</h5>
                            <ul>
                                <li><strong>What：</strong>问题是什么？</li>
                                <li><strong>Why：</strong>为什么重要？</li>
                                <li><strong>Who：</strong>涉及哪些人？</li>
                                <li><strong>When：</strong>时间维度是什么？</li>
                                <li><strong>Where：</strong>发生在哪里？</li>
                                <li><strong>How：</strong>如何解决？</li>
                                <li><strong>How much：</strong>成本和收益如何？</li>
                            </ul>
                        </div>
                        
                        <h3>数据故事化思维</h3>
                        <p>将数据分析结果转化为引人入胜的故事：</p>
                        <ul>
                            <li>设定清晰的叙事线</li>
                            <li>突出关键洞察</li>
                            <li>使用可视化增强理解</li>
                            <li>提供可操作的建议</li>
                        </ul>
                    `
                }
            },
            "statistics": {
                title: "统计学基础",
                icon: "📊",
                subtopics: {
                    "descriptive": "描述性统计",
                    "probability": "概率论基础",
                    "hypothesis": "假设检验",
                    "correlation": "相关性与因果关系"
                },
                content: {
                    "descriptive": `
                        <h2>描述性统计</h2>
                        <p>描述性统计是对数据集特征的总结和描述，帮助我们理解数据的基本特性。</p>
                        
                        <h3>集中趋势测量</h3>
                        
                        <h4>1. 平均值（Mean）</h4>
                        <p>所有数值的算术平均数，对异常值敏感。</p>
                        <div class="code-block">
                        平均值 = Σx / n
                        其中：x为各个数值，n为数值个数
                        </div>
                        
                        <h4>2. 中位数（Median）</h4>
                        <p>将数据排序后位于中间位置的值，不受异常值影响。</p>
                        
                        <h4>3. 众数（Mode）</h4>
                        <p>数据集中出现频率最高的值，可能有多个或没有。</p>
                        
                        <h3>离散程度测量</h3>
                        
                        <h4>1. 方差（Variance）</h4>
                        <p>衡量数据分散程度的指标。</p>
                        <div class="code-block">
                        方差 σ² = Σ(x - μ)² / n
                        </div>
                        
                        <h4>2. 标准差（Standard Deviation）</h4>
                        <p>方差的平方根，与原数据单位相同。</p>
                        
                        <h4>3. 极差（Range）</h4>
                        <p>最大值与最小值之差。</p>
                        
                        <h4>4. 四分位数（Quartiles）</h4>
                        <ul>
                            <li>Q1（第一四分位数）：25%分位点</li>
                            <li>Q2（第二四分位数）：中位数</li>
                            <li>Q3（第三四分位数）：75%分位点</li>
                            <li>IQR（四分位距）：Q3 - Q1</li>
                        </ul>
                        
                        <div class="highlight-box">
                            <h4>📈 分布形态指标</h4>
                            <ul>
                                <li><strong>偏度（Skewness）：</strong>衡量分布的不对称性</li>
                                <li><strong>峰度（Kurtosis）：</strong>衡量分布的尖峭程度</li>
                            </ul>
                        </div>
                        
                        <h3>数据分布类型</h3>
                        <div class="example-box">
                            <h5>常见分布</h5>
                            <ul>
                                <li><strong>正态分布：</strong>钟形曲线，均值=中位数=众数</li>
                                <li><strong>偏态分布：</strong>左偏（负偏）或右偏（正偏）</li>
                                <li><strong>均匀分布：</strong>所有值出现概率相等</li>
                                <li><strong>双峰分布：</strong>有两个峰值</li>
                            </ul>
                        </div>
                    `,
                    "probability": `
                        <h2>概率论基础</h2>
                        <p>概率论是研究随机现象数量规律的数学分支，是统计推断的理论基础。</p>
                        
                        <h3>基本概念</h3>
                        
                        <h4>概率定义</h4>
                        <p>事件发生的可能性大小，取值范围[0,1]。</p>
                        <div class="code-block">
                        P(A) = 有利结果数 / 所有可能结果数
                        </div>
                        
                        <h4>概率公理</h4>
                        <ul>
                            <li>非负性：P(A) ≥ 0</li>
                            <li>规范性：P(Ω) = 1（全集概率为1）</li>
                            <li>可列可加性：互斥事件概率可加</li>
                        </ul>
                        
                        <h3>概率运算规则</h3>
                        
                        <h4>1. 加法规则</h4>
                        <div class="code-block">
                        P(A ∪ B) = P(A) + P(B) - P(A ∩ B)
                        </div>
                        
                        <h4>2. 乘法规则</h4>
                        <div class="code-block">
                        P(A ∩ B) = P(A) × P(B|A)
                        </div>
                        
                        <h4>3. 条件概率</h4>
                        <div class="code-block">
                        P(A|B) = P(A ∩ B) / P(B)
                        </div>
                        
                        <h4>4. 贝叶斯定理</h4>
                        <div class="code-block">
                        P(A|B) = P(B|A) × P(A) / P(B)
                        </div>
                        
                        <div class="highlight-box">
                            <h4>🎲 独立性</h4>
                            <p>如果P(A ∩ B) = P(A) × P(B)，则事件A和B相互独立。</p>
                        </div>
                        
                        <h3>随机变量</h3>
                        
                        <h4>离散型随机变量</h4>
                        <ul>
                            <li><strong>二项分布：</strong>n次独立重复试验</li>
                            <li><strong>泊松分布：</strong>单位时间内事件发生次数</li>
                            <li><strong>几何分布：</strong>首次成功所需试验次数</li>
                        </ul>
                        
                        <h4>连续型随机变量</h4>
                        <ul>
                            <li><strong>正态分布：</strong>N(μ, σ²)</li>
                            <li><strong>指数分布：</strong>事件间隔时间</li>
                            <li><strong>均匀分布：</strong>U(a, b)</li>
                        </ul>
                        
                        <h3>大数定律与中心极限定理</h3>
                        
                        <div class="example-box">
                            <h5>大数定律</h5>
                            <p>样本量足够大时，样本均值趋近于总体均值。</p>
                        </div>
                        
                        <div class="example-box">
                            <h5>中心极限定理</h5>
                            <p>大量独立随机变量的和近似服从正态分布。</p>
                        </div>
                    `,
                    "hypothesis": `
                        <h2>假设检验</h2>
                        <p>假设检验是统计推断的核心方法，用于判断样本数据是否支持某个关于总体的假设。</p>
                        
                        <h3>假设检验基本概念</h3>
                        
                        <h4>假设设定</h4>
                        <ul>
                            <li><strong>原假设（H₀）：</strong>需要检验的陈述，通常表示"无差异"或"无效果"</li>
                            <li><strong>备择假设（H₁）：</strong>与原假设对立的陈述</li>
                        </ul>
                        
                        <h4>检验步骤</h4>
                        <ol>
                            <li>建立原假设和备择假设</li>
                            <li>选择显著性水平（α，通常0.05）</li>
                            <li>选择合适的检验统计量</li>
                            <li>计算检验统计量的值</li>
                            <li>确定拒绝域或计算p值</li>
                            <li>做出统计决策</li>
                        </ol>
                        
                        <h3>错误类型</h3>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h5>第一类错误（α）</h5>
                                <div class="number">弃真</div>
                                <p>拒绝正确的原假设</p>
                            </div>
                            <div class="stat-card">
                                <h5>第二类错误（β）</h5>
                                <div class="number">存伪</div>
                                <p>接受错误的原假设</p>
                            </div>
                        </div>
                        
                        <h3>常用假设检验</h3>
                        
                        <h4>1. 单样本t检验</h4>
                        <p>检验样本均值是否等于某个特定值。</p>
                        <div class="code-block">
                        t = (x̄ - μ₀) / (s/√n)
                        </div>
                        
                        <h4>2. 双样本t检验</h4>
                        <p>比较两个独立样本的均值是否相等。</p>
                        
                        <h4>3. 配对t检验</h4>
                        <p>比较配对数据的差异。</p>
                        
                        <h4>4. 卡方检验</h4>
                        <ul>
                            <li>拟合优度检验</li>
                            <li>独立性检验</li>
                        </ul>
                        
                        <h4>5. 方差分析（ANOVA）</h4>
                        <p>比较多个组的均值是否相等。</p>
                        
                        <div class="highlight-box">
                            <h4>⚠️ p值解释</h4>
                            <p>p值是在原假设为真的条件下，观察到当前或更极端结果的概率。</p>
                            <ul>
                                <li>p < 0.05：拒绝原假设（统计显著）</li>
                                <li>p ≥ 0.05：不拒绝原假设</li>
                            </ul>
                        </div>
                        
                        <h3>检验的功效</h3>
                        <p>统计功效 = 1 - β（正确拒绝错误原假设的概率）</p>
                        
                        <h4>影响功效的因素</h4>
                        <ul>
                            <li>样本量大小</li>
                            <li>效应量大小</li>
                            <li>显著性水平</li>
                            <li>数据变异程度</li>
                        </ul>
                    `,
                    "correlation": `
                        <h2>相关性与因果关系</h2>
                        <p>理解变量之间的关系是数据分析的重要部分，但必须区分相关性和因果关系。</p>
                        
                        <h3>相关性分析</h3>
                        
                        <h4>相关系数</h4>
                        <p>衡量两个变量之间线性关系强度的指标。</p>
                        
                        <h4>1. 皮尔逊相关系数（r）</h4>
                        <div class="code-block">
                        r = Σ[(xi - x̄)(yi - ȳ)] / √[Σ(xi - x̄)² × Σ(yi - ȳ)²]
                        </div>
                        <ul>
                            <li>取值范围：[-1, 1]</li>
                            <li>r > 0：正相关</li>
                            <li>r < 0：负相关</li>
                            <li>r = 0：无线性相关</li>
                        </ul>
                        
                        <h4>2. 斯皮尔曼等级相关系数</h4>
                        <p>基于等级的非参数相关性度量，适用于有序数据。</p>
                        
                        <h4>3. 肯德尔tau相关系数</h4>
                        <p>另一种非参数相关性度量。</p>
                        
                        <div class="highlight-box">
                            <h4>📊 相关强度判断</h4>
                            <ul>
                                <li>|r| < 0.3：弱相关</li>
                                <li>0.3 ≤ |r| < 0.7：中等相关</li>
                                <li>|r| ≥ 0.7：强相关</li>
                            </ul>
                        </div>
                        
                        <h3>因果关系</h3>
                        
                        <h4>因果关系的条件</h4>
                        <ul>
                            <li><strong>相关性：</strong>原因和结果必须相关</li>
                            <li><strong>时间顺序：</strong>原因必须在结果之前</li>
                            <li><strong>排除其他解释：</strong>控制混杂变量</li>
                        </ul>
                        
                        <h4>建立因果关系的方法</h4>
                        
                        <div class="example-box">
                            <h5>1. 随机对照试验（RCT）</h5>
                            <p>黄金标准，通过随机分配消除混杂因素。</p>
                        </div>
                        
                        <div class="example-box">
                            <h5>2. 自然实验</h5>
                            <p>利用自然发生的随机分配。</p>
                        </div>
                        
                        <div class="example-box">
                            <h5>3. 工具变量法</h5>
                            <p>使用与处理相关但与结果无直接关系的变量。</p>
                        </div>
                        
                        <div class="example-box">
                            <h5>4. 断点回归</h5>
                            <p>利用某个阈值上下的差异。</p>
                        </div>
                        
                        <h3>常见谬误</h3>
                        
                        <h4>1. 虚假相关</h4>
                        <p>两个变量因第三个变量而呈现相关性。</p>
                        
                        <h4>2. 辛普森悖论</h4>
                        <p>分组数据和总体数据呈现相反趋势。</p>
                        
                        <h4>3. 生态谬误</h4>
                        <p>将群体层面的关系错误推广到个体。</p>
                        
                        <h4>4. 后此谬误</h4>
                        <p>仅因时间顺序而推断因果关系。</p>
                        
                        <div class="highlight-box">
                            <h4>⚠️ 重要提醒</h4>
                            <p>"相关不等于因果"（Correlation is not causation）</p>
                            <p>发现相关性只是第一步，需要进一步的分析和实验来确定因果关系。</p>
                        </div>
                    `
                }
            },
            "collection": {
                title: "数据收集与清洗",
                icon: "🧹",
                subtopics: {
                    "methods": "数据采集方法",
                    "cleaning": "数据清洗技术",
                    "missing": "缺失值处理",
                    "outliers": "异常值检测与处理"
                },
                content: {
                    "methods": `
                        <h2>数据采集方法</h2>
                        <p>高质量的数据采集是成功分析的第一步。选择合适的采集方法对后续分析至关重要。</p>
                        
                        <h3>主动数据采集</h3>
                        
                        <h4>1. 调查问卷</h4>
                        <ul>
                            <li><strong>在线调查：</strong>通过网络平台收集（SurveyMonkey, Google Forms）</li>
                            <li><strong>电话调查：</strong>直接电话访问</li>
                            <li><strong>面对面访谈：</strong>深度访谈获取详细信息</li>
                        </ul>
                        
                        <h4>2. 实验设计</h4>
                        <ul>
                            <li>A/B测试</li>
                            <li>多变量测试</li>
                            <li>受控实验</li>
                        </ul>
                        
                        <h4>3. 观察法</h4>
                        <ul>
                            <li>用户行为观察</li>
                            <li>民族志研究</li>
                            <li>参与式观察</li>
                        </ul>
                        
                        <h3>被动数据采集</h3>
                        
                        <h4>1. 系统日志</h4>
                        <div class="example-box">
                            <h5>常见日志类型</h5>
                            <ul>
                                <li>Web服务器日志（Apache, Nginx）</li>
                                <li>应用程序日志</li>
                                <li>数据库日志</li>
                                <li>安全日志</li>
                            </ul>
                        </div>
                        
                        <h4>2. 传感器数据</h4>
                        <ul>
                            <li>IoT设备数据</li>
                            <li>GPS位置数据</li>
                            <li>环境监测数据</li>
                        </ul>
                        
                        <h4>3. Web爬虫</h4>
                        <div class="code-block">
                        # Python爬虫示例
                        import requests
                        from bs4 import BeautifulSoup
                        
                        response = requests.get(url)
                        soup = BeautifulSoup(response.text, 'html.parser')
                        data = soup.find_all('div', class_='data-item')
                        </div>
                        
                        <h3>API数据采集</h3>
                        
                        <h4>REST API</h4>
                        <ul>
                            <li>JSON格式数据</li>
                            <li>HTTP方法（GET, POST, PUT, DELETE）</li>
                            <li>认证和授权</li>
                        </ul>
                        
                        <h4>实时数据流</h4>
                        <ul>
                            <li>WebSocket连接</li>
                            <li>消息队列（Kafka, RabbitMQ）</li>
                            <li>流处理（Apache Spark Streaming）</li>
                        </ul>
                        
                        <div class="highlight-box">
                            <h4>📋 数据采集最佳实践</h4>
                            <ul>
                                <li>明确数据需求和目标</li>
                                <li>确保数据隐私和合规性</li>
                                <li>建立数据质量监控机制</li>
                                <li>实施数据版本控制</li>
                                <li>记录数据来源和采集方法</li>
                            </ul>
                        </div>
                        
                        <h3>采样方法</h3>
                        
                        <h4>概率采样</h4>
                        <ul>
                            <li><strong>简单随机采样：</strong>每个样本被选中概率相等</li>
                            <li><strong>分层采样：</strong>按特征分层后随机采样</li>
                            <li><strong>系统采样：</strong>按固定间隔选择样本</li>
                            <li><strong>整群采样：</strong>随机选择群组</li>
                        </ul>
                        
                        <h4>非概率采样</h4>
                        <ul>
                            <li><strong>便利采样：</strong>选择容易获得的样本</li>
                            <li><strong>目的采样：</strong>根据特定标准选择</li>
                            <li><strong>雪球采样：</strong>通过现有样本推荐新样本</li>
                            <li><strong>配额采样：</strong>按预定配额选择</li>
                        </ul>
                    `,
                    "cleaning": `
                        <h2>数据清洗技术</h2>
                        <p>数据清洗是将"脏"数据转换为高质量数据的过程，通常占据数据分析工作的60-80%时间。</p>
                        
                        <h3>数据清洗流程</h3>
                        
                        <h4>1. 数据审计</h4>
                        <ul>
                            <li>统计缺失值比例</li>
                            <li>识别数据类型错误</li>
                            <li>检查数据范围和分布</li>
                            <li>发现重复记录</li>
                        </ul>
                        
                        <h4>2. 数据标准化</h4>
                        
                        <div class="example-box">
                            <h5>格式标准化</h5>
                            <ul>
                                <li>日期格式统一（YYYY-MM-DD）</li>
                                <li>字符串大小写处理</li>
                                <li>去除多余空格</li>
                                <li>统一编码格式（UTF-8）</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>命名规范化</h5>
                            <ul>
                                <li>统一缩写和全称</li>
                                <li>处理同义词</li>
                                <li>规范化地址信息</li>
                            </ul>
                        </div>
                        
                        <h4>3. 数据转换</h4>
                        <div class="code-block">
                        # 数据类型转换示例
                        df['date'] = pd.to_datetime(df['date'])
                        df['price'] = df['price'].astype(float)
                        df['category'] = df['category'].astype('category')
                        </div>
                        
                        <h3>常见数据质量问题</h3>
                        
                        <h4>1. 不一致数据</h4>
                        <ul>
                            <li>同一实体的不同表示</li>
                            <li>违反业务规则的数据</li>
                            <li>引用完整性问题</li>
                        </ul>
                        
                        <h4>2. 重复数据</h4>
                        <div class="code-block">
                        # 去除重复记录
                        df.drop_duplicates(subset=['id'], keep='first')
                        
                        # 基于多列去重
                        df.drop_duplicates(subset=['name', 'email'])
                        </div>
                        
                        <h4>3. 数据错误</h4>
                        <ul>
                            <li>拼写错误</li>
                            <li>数据录入错误</li>
                            <li>计算错误</li>
                        </ul>
                        
                        <h3>数据验证规则</h3>
                        
                        <div class="highlight-box">
                            <h4>✅ 验证检查清单</h4>
                            <ul>
                                <li>字段完整性：必填字段不为空</li>
                                <li>格式验证：邮箱、电话号码格式</li>
                                <li>范围检查：数值在合理范围内</li>
                                <li>逻辑一致性：开始日期早于结束日期</li>
                                <li>引用完整性：外键关系有效</li>
                            </ul>
                        </div>
                        
                        <h3>自动化清洗工具</h3>
                        
                        <h4>Python库</h4>
                        <ul>
                            <li><strong>Pandas：</strong>数据处理和清洗</li>
                            <li><strong>NumPy：</strong>数值计算</li>
                            <li><strong>pyjanitor：</strong>数据清洗工具集</li>
                            <li><strong>fuzzywuzzy：</strong>模糊字符串匹配</li>
                        </ul>
                        
                        <h4>专业工具</h4>
                        <ul>
                            <li>OpenRefine</li>
                            <li>Trifacta Wrangler</li>
                            <li>Talend Data Preparation</li>
                        </ul>
                    `,
                    "missing": `
                        <h2>缺失值处理</h2>
                        <p>缺失值是数据分析中最常见的问题之一，正确处理缺失值对分析结果的准确性至关重要。</p>
                        
                        <h3>缺失值类型</h3>
                        
                        <h4>1. 完全随机缺失（MCAR）</h4>
                        <p>缺失与任何变量都无关，纯随机发生。</p>
                        
                        <h4>2. 随机缺失（MAR）</h4>
                        <p>缺失与其他观测变量相关，但与缺失值本身无关。</p>
                        
                        <h4>3. 非随机缺失（MNAR）</h4>
                        <p>缺失与未观测到的值本身相关。</p>
                        
                        <h3>缺失值检测</h3>
                        
                        <div class="code-block">
                        # Python缺失值检测
                        # 查看缺失值数量
                        df.isnull().sum()
                        
                        # 缺失值比例
                        df.isnull().sum() / len(df) * 100
                        
                        # 可视化缺失值模式
                        import missingno as msno
                        msno.matrix(df)
                        </div>
                        
                        <h3>处理策略</h3>
                        
                        <h4>1. 删除法</h4>
                        
                        <div class="example-box">
                            <h5>列删除</h5>
                            <p>当某列缺失值比例过高（如>60%）时删除整列。</p>
                            <div class="code-block">
                            df.dropna(axis=1, thresh=len(df)*0.4)
                            </div>
                        </div>
                        
                        <div class="example-box">
                            <h5>行删除</h5>
                            <p>删除含有缺失值的行，适用于缺失比例较小的情况。</p>
                            <div class="code-block">
                            df.dropna(axis=0, how='any')
                            </div>
                        </div>
                        
                        <h4>2. 填充法</h4>
                        
                        <div class="highlight-box">
                            <h4>🔧 常用填充方法</h4>
                            <ul>
                                <li><strong>均值填充：</strong>用该列均值填充（数值型）</li>
                                <li><strong>中位数填充：</strong>对异常值稳健</li>
                                <li><strong>众数填充：</strong>适用于分类变量</li>
                                <li><strong>前向/后向填充：</strong>时间序列数据</li>
                                <li><strong>插值填充：</strong>线性或多项式插值</li>
                            </ul>
                        </div>
                        
                        <div class="code-block">
                        # 不同填充方法示例
                        # 均值填充
                        df['column'].fillna(df['column'].mean())
                        
                        # 中位数填充
                        df['column'].fillna(df['column'].median())
                        
                        # 前向填充
                        df['column'].fillna(method='ffill')
                        
                        # 插值
                        df['column'].interpolate(method='linear')
                        </div>
                        
                        <h4>3. 预测填充</h4>
                        
                        <p>使用机器学习模型预测缺失值：</p>
                        <ul>
                            <li><strong>KNN填充：</strong>基于相似样本</li>
                            <li><strong>回归填充：</strong>建立回归模型</li>
                            <li><strong>MICE：</strong>多重插补</li>
                            <li><strong>深度学习：</strong>自编码器等</li>
                        </ul>
                        
                        <h4>4. 标记法</h4>
                        <p>将缺失值作为一个独立类别或添加指示变量。</p>
                        
                        <div class="code-block">
                        # 添加缺失值指示器
                        df['column_missing'] = df['column'].isnull().astype(int)
                        df['column'].fillna('Missing')
                        </div>
                        
                        <h3>选择策略的考虑因素</h3>
                        
                        <ul>
                            <li>缺失机制（MCAR/MAR/MNAR）</li>
                            <li>缺失比例</li>
                            <li>变量重要性</li>
                            <li>样本量大小</li>
                            <li>分析目的</li>
                        </ul>
                    `,
                    "outliers": `
                        <h2>异常值检测与处理</h2>
                        <p>异常值是显著偏离其他观测值的数据点，可能是错误也可能包含重要信息。</p>
                        
                        <h3>异常值类型</h3>
                        
                        <h4>1. 点异常</h4>
                        <p>单个数据点明显偏离正常范围。</p>
                        
                        <h4>2. 上下文异常</h4>
                        <p>在特定上下文中异常（如夏天的低温）。</p>
                        
                        <h4>3. 集体异常</h4>
                        <p>一组数据点集体表现异常。</p>
                        
                        <h3>检测方法</h3>
                        
                        <h4>1. 统计方法</h4>
                        
                        <div class="example-box">
                            <h5>3σ原则</h5>
                            <p>距离均值超过3倍标准差的点视为异常。</p>
                            <div class="code-block">
                            mean = df['column'].mean()
                            std = df['column'].std()
                            outliers = df[abs(df['column'] - mean) > 3 * std]
                            </div>
                        </div>
                        
                        <div class="example-box">
                            <h5>IQR方法</h5>
                            <p>四分位距法，更稳健的方法。</p>
                            <div class="code-block">
                            Q1 = df['column'].quantile(0.25)
                            Q3 = df['column'].quantile(0.75)
                            IQR = Q3 - Q1
                            outliers = df[(df['column'] < Q1 - 1.5*IQR) | 
                                         (df['column'] > Q3 + 1.5*IQR)]
                            </div>
                        </div>
                        
                        <h4>2. 可视化方法</h4>
                        <ul>
                            <li><strong>箱线图：</strong>直观显示异常值</li>
                            <li><strong>散点图：</strong>二维数据异常检测</li>
                            <li><strong>直方图：</strong>分布异常</li>
                            <li><strong>QQ图：</strong>与理论分布比较</li>
                        </ul>
                        
                        <h4>3. 机器学习方法</h4>
                        
                        <div class="highlight-box">
                            <h4>🤖 高级检测算法</h4>
                            <ul>
                                <li><strong>Isolation Forest：</strong>基于随机森林</li>
                                <li><strong>Local Outlier Factor：</strong>基于密度</li>
                                <li><strong>One-Class SVM：</strong>支持向量机</li>
                                <li><strong>DBSCAN：</strong>基于聚类</li>
                                <li><strong>Autoencoder：</strong>深度学习方法</li>
                            </ul>
                        </div>
                        
                        <h3>处理策略</h3>
                        
                        <h4>1. 保留</h4>
                        <p>如果异常值是真实的极端情况，应该保留。</p>
                        
                        <h4>2. 删除</h4>
                        <p>确认为错误或对分析有负面影响时删除。</p>
                        
                        <h4>3. 修正</h4>
                        <ul>
                            <li><strong>封顶法：</strong>将异常值替换为上下界</li>
                            <li><strong>变换法：</strong>对数变换、Box-Cox变换</li>
                            <li><strong>分箱法：</strong>将连续值离散化</li>
                        </ul>
                        
                        <div class="code-block">
                        # 封顶处理
                        upper_limit = df['column'].quantile(0.95)
                        lower_limit = df['column'].quantile(0.05)
                        df['column'] = df['column'].clip(lower_limit, upper_limit)
                        
                        # 对数变换
                        df['column_log'] = np.log1p(df['column'])
                        </div>
                        
                        <h4>4. 分组处理</h4>
                        <p>将异常值单独分析，可能发现新的模式。</p>
                        
                        <h3>处理原则</h3>
                        
                        <div class="example-box">
                            <h5>决策框架</h5>
                            <ul>
                                <li>理解业务背景和数据生成过程</li>
                                <li>区分错误和真实极端值</li>
                                <li>评估对分析目标的影响</li>
                                <li>记录处理决策和理由</li>
                                <li>进行敏感性分析</li>
                            </ul>
                        </div>
                    `
                }
            },
            "visualization": {
                title: "数据可视化",
                icon: "📉",
                subtopics: {
                    "principles": "可视化原则与最佳实践",
                    "charts": "图表类型选择",
                    "dashboard": "仪表板设计",
                    "storytelling": "数据故事讲述"
                },
                content: {
                    "principles": `
                        <h2>可视化原则与最佳实践</h2>
                        <p>优秀的数据可视化能够清晰、准确、高效地传达信息，帮助观众快速理解数据洞察。</p>
                        
                        <h3>核心设计原则</h3>
                        
                        <h4>1. 清晰性（Clarity）</h4>
                        <ul>
                            <li>避免不必要的装饰元素</li>
                            <li>使用清晰的标题和标签</li>
                            <li>保持简洁的设计</li>
                            <li>突出关键信息</li>
                        </ul>
                        
                        <h4>2. 准确性（Accuracy）</h4>
                        <ul>
                            <li>正确表示数据比例</li>
                            <li>避免误导性的视觉效果</li>
                            <li>使用适当的坐标轴范围</li>
                            <li>标注数据来源和时间</li>
                        </ul>
                        
                        <h4>3. 效率性（Efficiency）</h4>
                        <ul>
                            <li>选择最适合的图表类型</li>
                            <li>减少认知负担</li>
                            <li>利用视觉编码层次</li>
                            <li>支持快速理解</li>
                        </ul>
                        
                        <h3>视觉编码原则</h3>
                        
                        <div class="highlight-box">
                            <h4>📊 视觉通道效果排序</h4>
                            <p>从最有效到最不有效：</p>
                            <ol>
                                <li>位置（Position）</li>
                                <li>长度（Length）</li>
                                <li>角度（Angle）</li>
                                <li>面积（Area）</li>
                                <li>体积（Volume）</li>
                                <li>颜色（Color）</li>
                                <li>形状（Shape）</li>
                            </ol>
                        </div>
                        
                        <h3>色彩使用原则</h3>
                        
                        <h4>色彩选择</h4>
                        <ul>
                            <li><strong>顺序色彩：</strong>表示数值大小（浅到深）</li>
                            <li><strong>发散色彩：</strong>表示正负或两极（红-白-蓝）</li>
                            <li><strong>分类色彩：</strong>区分不同类别（对比色）</li>
                        </ul>
                        
                        <h4>色彩最佳实践</h4>
                        <ul>
                            <li>限制颜色数量（最多5-7种）</li>
                            <li>考虑色盲友好配色</li>
                            <li>保持品牌一致性</li>
                            <li>使用颜色强调重点</li>
                        </ul>
                        
                        <h3>格式塔原理应用</h3>
                        
                        <div class="example-box">
                            <h5>视觉感知原理</h5>
                            <ul>
                                <li><strong>邻近性：</strong>相近的元素被视为一组</li>
                                <li><strong>相似性：</strong>相似的元素被视为相关</li>
                                <li><strong>连续性：</strong>连续的线条被视为整体</li>
                                <li><strong>闭合性：</strong>倾向于看到完整形状</li>
                                <li><strong>图底关系：</strong>区分前景和背景</li>
                            </ul>
                        </div>
                        
                        <h3>数据墨水比原则</h3>
                        
                        <p>Edward Tufte提出的概念：最大化数据墨水比，减少非数据墨水。</p>
                        
                        <div class="code-block">
                        数据墨水比 = 数据墨水 / 总墨水量
                        </div>
                        
                        <h4>实践建议</h4>
                        <ul>
                            <li>去除不必要的网格线</li>
                            <li>简化边框和背景</li>
                            <li>避免3D效果</li>
                            <li>减少装饰性元素</li>
                        </ul>
                        
                        <h3>响应式设计</h3>
                        
                        <ul>
                            <li>适应不同屏幕尺寸</li>
                            <li>保持可读性</li>
                            <li>交互元素大小适中</li>
                            <li>考虑移动端体验</li>
                        </ul>
                    `,
                    "charts": `
                        <h2>图表类型选择</h2>
                        <p>选择正确的图表类型是有效数据可视化的关键。不同的图表适合展示不同类型的数据关系。</p>
                        
                        <h3>图表选择决策树</h3>
                        
                        <div class="highlight-box">
                            <h4>🎯 快速选择指南</h4>
                            <ul>
                                <li><strong>比较：</strong>柱状图、条形图</li>
                                <li><strong>趋势：</strong>折线图、面积图</li>
                                <li><strong>占比：</strong>饼图、环形图、树图</li>
                                <li><strong>分布：</strong>直方图、箱线图、小提琴图</li>
                                <li><strong>关系：</strong>散点图、气泡图、热力图</li>
                                <li><strong>流程：</strong>桑基图、漏斗图</li>
                            </ul>
                        </div>
                        
                        <h3>常用图表详解</h3>
                        
                        <h4>1. 柱状图/条形图</h4>
                        <div class="example-box">
                            <h5>适用场景</h5>
                            <ul>
                                <li>比较不同类别的数值</li>
                                <li>展示排名和大小关系</li>
                                <li>时间序列的离散数据</li>
                            </ul>
                            <h5>最佳实践</h5>
                            <ul>
                                <li>从零开始Y轴</li>
                                <li>按值排序（如果无自然顺序）</li>
                                <li>类别过多时使用条形图</li>
                            </ul>
                        </div>
                        
                        <h4>2. 折线图</h4>
                        <div class="example-box">
                            <h5>适用场景</h5>
                            <ul>
                                <li>展示时间序列趋势</li>
                                <li>比较多个序列变化</li>
                                <li>显示连续数据</li>
                            </ul>
                            <h5>最佳实践</h5>
                            <ul>
                                <li>限制线条数量（最多5-6条）</li>
                                <li>使用不同线型区分</li>
                                <li>标注关键数据点</li>
                            </ul>
                        </div>
                        
                        <h4>3. 散点图</h4>
                        <div class="example-box">
                            <h5>适用场景</h5>
                            <ul>
                                <li>展示两个变量的关系</li>
                                <li>识别相关性和模式</li>
                                <li>发现异常值和聚类</li>
                            </ul>
                            <h5>最佳实践</h5>
                            <ul>
                                <li>添加趋势线辅助理解</li>
                                <li>使用颜色编码第三维度</li>
                                <li>控制点的透明度避免重叠</li>
                            </ul>
                        </div>
                        
                        <h4>4. 热力图</h4>
                        <div class="example-box">
                            <h5>适用场景</h5>
                            <ul>
                                <li>展示矩阵数据</li>
                                <li>相关性分析</li>
                                <li>时间模式分析</li>
                            </ul>
                            <h5>最佳实践</h5>
                            <ul>
                                <li>选择合适的色彩方案</li>
                                <li>提供色彩图例</li>
                                <li>考虑数据标准化</li>
                            </ul>
                        </div>
                        
                        <h4>5. 箱线图</h4>
                        <div class="example-box">
                            <h5>适用场景</h5>
                            <ul>
                                <li>展示数据分布</li>
                                <li>比较多组数据</li>
                                <li>识别异常值</li>
                            </ul>
                            <h5>组成部分</h5>
                            <ul>
                                <li>中位数（中线）</li>
                                <li>四分位数（箱体）</li>
                                <li>最值（须线）</li>
                                <li>异常值（点）</li>
                            </ul>
                        </div>
                        
                        <h3>高级图表类型</h3>
                        
                        <h4>1. 桑基图（Sankey Diagram）</h4>
                        <p>展示流量和转化路径，适合能量流、资金流、用户流分析。</p>
                        
                        <h4>2. 树图（Treemap）</h4>
                        <p>展示层级结构和占比关系，适合展示组成结构。</p>
                        
                        <h4>3. 雷达图（Radar Chart）</h4>
                        <p>多维度比较，适合能力评估、产品对比。</p>
                        
                        <h4>4. 平行坐标图</h4>
                        <p>展示多维数据，适合模式识别和聚类分析。</p>
                        
                        <h3>组合图表</h3>
                        
                        <p>结合多种图表类型展示复杂信息：</p>
                        <ul>
                            <li>双轴图（柱状图+折线图）</li>
                            <li>散点图矩阵</li>
                            <li>分面图（Small Multiples）</li>
                        </ul>
                    `,
                    "dashboard": `
                        <h2>仪表板设计</h2>
                        <p>仪表板是数据可视化的集成展示，用于监控关键指标和支持决策。好的仪表板设计能够快速传达重要信息。</p>
                        
                        <h3>仪表板类型</h3>
                        
                        <h4>1. 操作型仪表板</h4>
                        <ul>
                            <li>实时或近实时更新</li>
                            <li>监控日常运营</li>
                            <li>快速识别问题</li>
                            <li>支持即时行动</li>
                        </ul>
                        
                        <h4>2. 分析型仪表板</h4>
                        <ul>
                            <li>深入数据分析</li>
                            <li>趋势和模式识别</li>
                            <li>交互式探索</li>
                            <li>支持数据挖掘</li>
                        </ul>
                        
                        <h4>3. 战略型仪表板</h4>
                        <ul>
                            <li>高层次KPI展示</li>
                            <li>长期趋势跟踪</li>
                            <li>目标达成情况</li>
                            <li>支持战略决策</li>
                        </ul>
                        
                        <h3>设计原则</h3>
                        
                        <div class="highlight-box">
                            <h4>🎨 五秒规则</h4>
                            <p>用户应该在5秒内理解仪表板的主要信息。</p>
                        </div>
                        
                        <h4>1. 信息层次</h4>
                        <ul>
                            <li><strong>主要指标：</strong>最重要的2-3个KPI</li>
                            <li><strong>次要指标：</strong>支持性指标</li>
                            <li><strong>详细信息：</strong>深入分析数据</li>
                        </ul>
                        
                        <h4>2. 布局设计</h4>
                        <div class="example-box">
                            <h5>Z型布局</h5>
                            <p>遵循用户自然的视线移动路径：</p>
                            <ul>
                                <li>左上：最重要信息</li>
                                <li>右上：次要信息</li>
                                <li>中间：支持信息</li>
                                <li>底部：详细数据</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>F型布局</h5>
                            <p>适合信息密集型仪表板：</p>
                            <ul>
                                <li>顶部横向：关键指标</li>
                                <li>左侧纵向：导航或筛选</li>
                                <li>主体区域：详细图表</li>
                            </ul>
                        </div>
                        
                        <h3>关键组件</h3>
                        
                        <h4>1. KPI卡片</h4>
                        <ul>
                            <li>当前值</li>
                            <li>变化趋势（箭头/百分比）</li>
                            <li>对比值（环比/同比）</li>
                            <li>迷你图表</li>
                        </ul>
                        
                        <h4>2. 筛选器</h4>
                        <ul>
                            <li>时间选择器</li>
                            <li>维度筛选</li>
                            <li>搜索框</li>
                            <li>快速筛选按钮</li>
                        </ul>
                        
                        <h4>3. 图表区域</h4>
                        <ul>
                            <li>主要趋势图</li>
                            <li>对比分析图</li>
                            <li>分布图</li>
                            <li>明细表格</li>
                        </ul>
                        
                        <h3>交互设计</h3>
                        
                        <h4>交互功能</h4>
                        <ul>
                            <li><strong>钻取（Drill-down）：</strong>从汇总到明细</li>
                            <li><strong>筛选联动：</strong>多图表联动更新</li>
                            <li><strong>工具提示：</strong>悬停显示详情</li>
                            <li><strong>缩放：</strong>时间轴缩放</li>
                            <li><strong>导出：</strong>数据和图表导出</li>
                        </ul>
                        
                        <h3>性能优化</h3>
                        
                        <div class="example-box">
                            <h5>优化策略</h5>
                            <ul>
                                <li>数据预聚合</li>
                                <li>增量加载</li>
                                <li>缓存机制</li>
                                <li>异步更新</li>
                                <li>延迟加载</li>
                            </ul>
                        </div>
                        
                        <h3>移动端适配</h3>
                        
                        <ul>
                            <li>响应式布局</li>
                            <li>触控优化</li>
                            <li>简化信息</li>
                            <li>垂直滚动</li>
                            <li>关键指标优先</li>
                        </ul>
                        
                        <h3>常见错误</h3>
                        
                        <div class="highlight-box">
                            <h4>⚠️ 避免这些问题</h4>
                            <ul>
                                <li>信息过载</li>
                                <li>不合理的图表选择</li>
                                <li>缺乏视觉层次</li>
                                <li>颜色使用过多</li>
                                <li>忽视性能问题</li>
                                <li>缺少上下文信息</li>
                            </ul>
                        </div>
                    `,
                    "storytelling": `
                        <h2>数据故事讲述</h2>
                        <p>数据故事讲述是将数据分析结果转化为引人入胜的叙述，帮助受众理解洞察并采取行动。</p>
                        
                        <h3>故事结构</h3>
                        
                        <h4>经典三幕结构</h4>
                        
                        <div class="example-box">
                            <h5>第一幕：设置（Setup）</h5>
                            <ul>
                                <li>背景介绍</li>
                                <li>问题定义</li>
                                <li>为什么重要</li>
                                <li>受众关注点</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>第二幕：冲突（Conflict）</h5>
                            <ul>
                                <li>数据发现</li>
                                <li>挑战和机会</li>
                                <li>意外洞察</li>
                                <li>深入分析</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>第三幕：解决（Resolution）</h5>
                            <ul>
                                <li>关键结论</li>
                                <li>行动建议</li>
                                <li>预期影响</li>
                                <li>下一步计划</li>
                            </ul>
                        </div>
                        
                        <h3>叙事技巧</h3>
                        
                        <h4>1. 金字塔原理</h4>
                        <p>从结论开始，逐层展开支撑论据。</p>
                        <ul>
                            <li>先说结论</li>
                            <li>分组论据</li>
                            <li>逻辑递进</li>
                            <li>MECE原则</li>
                        </ul>
                        
                        <h4>2. 情感连接</h4>
                        <ul>
                            <li>使用具体案例</li>
                            <li>人物化数据</li>
                            <li>创造共鸣</li>
                            <li>展示影响</li>
                        </ul>
                        
                        <h4>3. 认知负荷管理</h4>
                        <ul>
                            <li>循序渐进</li>
                            <li>重复关键信息</li>
                            <li>使用类比</li>
                            <li>视觉辅助</li>
                        </ul>
                        
                        <h3>可视化叙事</h3>
                        
                        <div class="highlight-box">
                            <h4>📖 注释层次</h4>
                            <ul>
                                <li><strong>标题：</strong>传达主要信息</li>
                                <li><strong>副标题：</strong>提供上下文</li>
                                <li><strong>标注：</strong>突出关键点</li>
                                <li><strong>说明：</strong>解释复杂概念</li>
                            </ul>
                        </div>
                        
                        <h4>动态叙事技术</h4>
                        <ul>
                            <li><strong>滚动叙事：</strong>随滚动展开故事</li>
                            <li><strong>步进式展示：</strong>分步骤呈现</li>
                            <li><strong>动画转场：</strong>平滑过渡</li>
                            <li><strong>交互探索：</strong>用户驱动</li>
                        </ul>
                        
                        <h3>受众分析</h3>
                        
                        <h4>不同受众的需求</h4>
                        
                        <div class="example-box">
                            <h5>高管层</h5>
                            <ul>
                                <li>关注战略影响</li>
                                <li>要求简洁明了</li>
                                <li>重视ROI</li>
                                <li>需要行动建议</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>技术团队</h5>
                            <ul>
                                <li>关注方法论</li>
                                <li>需要技术细节</li>
                                <li>重视数据质量</li>
                                <li>要求可重现性</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>业务团队</h5>
                            <ul>
                                <li>关注实际应用</li>
                                <li>需要具体案例</li>
                                <li>重视可操作性</li>
                                <li>要求清晰指导</li>
                            </ul>
                        </div>
                        
                        <h3>呈现技巧</h3>
                        
                        <h4>演示文稿设计</h4>
                        <ul>
                            <li>一页一个要点</li>
                            <li>视觉大于文字</li>
                            <li>保持一致风格</li>
                            <li>适当留白</li>
                        </ul>
                        
                        <h4>口头表达</h4>
                        <ul>
                            <li>控制节奏</li>
                            <li>强调重点</li>
                            <li>使用停顿</li>
                            <li>互动提问</li>
                        </ul>
                        
                        <h3>常见框架</h3>
                        
                        <div class="example-box">
                            <h5>STAR框架</h5>
                            <ul>
                                <li><strong>Situation：</strong>情境背景</li>
                                <li><strong>Task：</strong>任务目标</li>
                                <li><strong>Action：</strong>采取行动</li>
                                <li><strong>Result：</strong>结果影响</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>So What框架</h5>
                            <p>每个数据点都要回答"那又怎样？"</p>
                            <ul>
                                <li>数据是什么</li>
                                <li>意味着什么</li>
                                <li>应该做什么</li>
                            </ul>
                        </div>
                    `
                }
            },
            "tools": {
                title: "数据分析工具",
                icon: "🛠️",
                subtopics: {
                    "excel": "Excel数据分析",
                    "sql": "SQL数据查询",
                    "python": "Python数据分析",
                    "bi": "BI工具应用"
                },
                content: {
                    "excel": `
                        <h2>Excel数据分析</h2>
                        <p>Excel是最广泛使用的数据分析工具之一，掌握其高级功能可以大幅提升分析效率。</p>
                        
                        <h3>数据处理功能</h3>
                        
                        <h4>1. 数据清洗</h4>
                        <ul>
                            <li><strong>删除重复值：</strong>数据 → 删除重复项</li>
                            <li><strong>文本分列：</strong>将一列拆分为多列</li>
                            <li><strong>查找替换：</strong>批量修改数据</li>
                            <li><strong>修剪空格：</strong>TRIM函数</li>
                        </ul>
                        
                        <h4>2. 数据转换</h4>
                        <div class="code-block">
                        常用函数：
                        =TEXT(A1,"yyyy-mm-dd")  # 日期格式化
                        =UPPER()/LOWER()        # 大小写转换
                        =CONCATENATE()          # 文本合并
                        =VALUE()                # 文本转数值
                        </div>
                        
                        <h3>核心分析函数</h3>
                        
                        <h4>查找引用函数</h4>
                        <div class="example-box">
                            <h5>VLOOKUP/XLOOKUP</h5>
                            <div class="code-block">
                            =VLOOKUP(查找值, 区域, 列序号, FALSE)
                            =XLOOKUP(查找值, 查找数组, 返回数组)
                            </div>
                        </div>
                        
                        <div class="example-box">
                            <h5>INDEX/MATCH组合</h5>
                            <div class="code-block">
                            =INDEX(返回区域, MATCH(查找值, 查找区域, 0))
                            </div>
                        </div>
                        
                        <h4>条件统计函数</h4>
                        <ul>
                            <li>SUMIF/SUMIFS：条件求和</li>
                            <li>COUNTIF/COUNTIFS：条件计数</li>
                            <li>AVERAGEIF/AVERAGEIFS：条件平均</li>
                        </ul>
                        
                        <h4>数组公式</h4>
                        <div class="code-block">
                        # 动态数组（Excel 365）
                        =UNIQUE()      # 唯一值
                        =SORT()        # 排序
                        =FILTER()      # 筛选
                        =SEQUENCE()    # 序列生成
                        </div>
                        
                        <h3>数据透视表</h3>
                        
                        <h4>创建步骤</h4>
                        <ol>
                            <li>选择数据区域</li>
                            <li>插入 → 数据透视表</li>
                            <li>拖拽字段到相应区域</li>
                            <li>设置值字段汇总方式</li>
                        </ol>
                        
                        <h4>高级技巧</h4>
                        <ul>
                            <li><strong>切片器：</strong>可视化筛选</li>
                            <li><strong>时间轴：</strong>时间筛选</li>
                            <li><strong>计算字段：</strong>自定义计算</li>
                            <li><strong>分组：</strong>日期、数值分组</li>
                            <li><strong>显示方式：</strong>百分比、排名等</li>
                        </ul>
                        
                        <h3>数据分析工具库</h3>
                        
                        <div class="highlight-box">
                            <h4>📊 分析工具库功能</h4>
                            <p>启用：文件 → 选项 → 加载项 → 分析工具库</p>
                            <ul>
                                <li>描述统计</li>
                                <li>直方图</li>
                                <li>回归分析</li>
                                <li>相关分析</li>
                                <li>t检验</li>
                                <li>方差分析</li>
                                <li>移动平均</li>
                            </ul>
                        </div>
                        
                        <h3>Power Query</h3>
                        
                        <h4>数据导入与转换</h4>
                        <ul>
                            <li>多源数据连接</li>
                            <li>数据合并与追加</li>
                            <li>高级数据清洗</li>
                            <li>M语言编程</li>
                        </ul>
                        
                        <h3>可视化功能</h3>
                        
                        <h4>图表类型</h4>
                        <ul>
                            <li>基础图表：柱形、折线、饼图</li>
                            <li>组合图表：双轴图</li>
                            <li>统计图表：箱线图、直方图</li>
                            <li>迷你图：单元格内小图表</li>
                        </ul>
                        
                        <h4>条件格式</h4>
                        <ul>
                            <li>数据条</li>
                            <li>色阶</li>
                            <li>图标集</li>
                            <li>自定义规则</li>
                        </ul>
                        
                        <h3>VBA自动化</h3>
                        
                        <div class="code-block">
                        Sub DataAnalysis()
                            Dim ws As Worksheet
                            Set ws = ActiveSheet
                            
                            ' 自动化数据处理
                            ws.Range("A:A").RemoveDuplicates
                            ws.AutoFilter Field:=1, Criteria1:=">100"
                            
                            ' 创建透视表
                            ActiveWorkbook.PivotCaches.Create( _
                                SourceType:=xlDatabase, _
                                SourceData:=ws.UsedRange).CreatePivotTable _
                                TableDestination:="Sheet2!R1C1"
                        End Sub
                        </div>
                    `,
                    "sql": `
                        <h2>SQL数据查询</h2>
                        <p>SQL（结构化查询语言）是数据分析师必备技能，用于从关系型数据库中提取和操作数据。</p>
                        
                        <h3>基础查询</h3>
                        
                        <h4>SELECT语句结构</h4>
                        <div class="code-block">
                        SELECT column1, column2, ...
                        FROM table_name
                        WHERE condition
                        GROUP BY column
                        HAVING condition
                        ORDER BY column [ASC|DESC]
                        LIMIT number;
                        </div>
                        
                        <h4>筛选与排序</h4>
                        <div class="code-block">
                        -- WHERE子句条件
                        WHERE age > 18 AND city = 'Beijing'
                        WHERE name LIKE '%zhang%'
                        WHERE date BETWEEN '2024-01-01' AND '2024-12-31'
                        WHERE category IN ('A', 'B', 'C')
                        WHERE email IS NOT NULL
                        
                        -- 排序
                        ORDER BY sales DESC, date ASC
                        </div>
                        
                        <h3>聚合函数</h3>
                        
                        <div class="example-box">
                            <h5>常用聚合函数</h5>
                            <div class="code-block">
                            COUNT(*)           -- 计数
                            COUNT(DISTINCT)    -- 去重计数
                            SUM(column)        -- 求和
                            AVG(column)        -- 平均值
                            MAX(column)        -- 最大值
                            MIN(column)        -- 最小值
                            GROUP_CONCAT()     -- 字符串连接
                            </div>
                        </div>
                        
                        <h4>分组统计</h4>
                        <div class="code-block">
                        SELECT 
                            category,
                            COUNT(*) as count,
                            AVG(price) as avg_price,
                            SUM(quantity) as total_qty
                        FROM products
                        GROUP BY category
                        HAVING COUNT(*) > 10;
                        </div>
                        
                        <h3>表连接</h3>
                        
                        <h4>连接类型</h4>
                        <div class="highlight-box">
                            <h4>🔗 JOIN类型说明</h4>
                            <ul>
                                <li><strong>INNER JOIN：</strong>返回两表匹配的记录</li>
                                <li><strong>LEFT JOIN：</strong>返回左表所有记录</li>
                                <li><strong>RIGHT JOIN：</strong>返回右表所有记录</li>
                                <li><strong>FULL JOIN：</strong>返回两表所有记录</li>
                                <li><strong>CROSS JOIN：</strong>笛卡尔积</li>
                            </ul>
                        </div>
                        
                        <div class="code-block">
                        -- 多表连接示例
                        SELECT 
                            o.order_id,
                            c.customer_name,
                            p.product_name,
                            od.quantity,
                            od.price
                        FROM orders o
                        INNER JOIN customers c ON o.customer_id = c.id
                        INNER JOIN order_details od ON o.order_id = od.order_id
                        INNER JOIN products p ON od.product_id = p.id
                        WHERE o.order_date >= '2024-01-01';
                        </div>
                        
                        <h3>子查询</h3>
                        
                        <h4>子查询类型</h4>
                        <div class="code-block">
                        -- 标量子查询
                        SELECT * FROM products 
                        WHERE price > (SELECT AVG(price) FROM products);
                        
                        -- IN子查询
                        SELECT * FROM customers 
                        WHERE id IN (SELECT customer_id FROM orders WHERE total > 1000);
                        
                        -- EXISTS子查询
                        SELECT * FROM customers c
                        WHERE EXISTS (
                            SELECT 1 FROM orders o 
                            WHERE o.customer_id = c.id 
                            AND o.order_date >= '2024-01-01'
                        );
                        </div>
                        
                        <h3>窗口函数</h3>
                        
                        <div class="example-box">
                            <h5>排名函数</h5>
                            <div class="code-block">
                            ROW_NUMBER() OVER (ORDER BY sales DESC)
                            RANK() OVER (ORDER BY sales DESC)
                            DENSE_RANK() OVER (ORDER BY sales DESC)
                            NTILE(4) OVER (ORDER BY sales DESC)
                            </div>
                        </div>
                        
                        <div class="example-box">
                            <h5>分析函数</h5>
                            <div class="code-block">
                            -- 移动平均
                            AVG(sales) OVER (ORDER BY date ROWS BETWEEN 6 PRECEDING AND CURRENT ROW)
                            
                            -- 累计和
                            SUM(sales) OVER (ORDER BY date)
                            
                            -- 前后值
                            LAG(sales, 1) OVER (ORDER BY date)
                            LEAD(sales, 1) OVER (ORDER BY date)
                            </div>
                        </div>
                        
                        <h3>CTE与临时表</h3>
                        
                        <div class="code-block">
                        -- CTE (Common Table Expression)
                        WITH monthly_sales AS (
                            SELECT 
                                DATE_FORMAT(date, '%Y-%m') as month,
                                SUM(sales) as total_sales
                            FROM transactions
                            GROUP BY DATE_FORMAT(date, '%Y-%m')
                        )
                        SELECT 
                            month,
                            total_sales,
                            LAG(total_sales) OVER (ORDER BY month) as prev_month,
                            total_sales - LAG(total_sales) OVER (ORDER BY month) as growth
                        FROM monthly_sales;
                        </div>
                        
                        <h3>性能优化</h3>
                        
                        <h4>优化技巧</h4>
                        <ul>
                            <li>使用索引</li>
                            <li>避免SELECT *</li>
                            <li>使用EXPLAIN分析</li>
                            <li>批量操作</li>
                            <li>避免在WHERE中使用函数</li>
                            <li>合理使用临时表</li>
                        </ul>
                    `,
                    "python": `
                        <h2>Python数据分析</h2>
                        <p>Python是数据分析领域最流行的编程语言，拥有丰富的库生态系统。</p>
                        
                        <h3>核心库介绍</h3>
                        
                        <h4>数据处理库</h4>
                        <div class="example-box">
                            <h5>Pandas</h5>
                            <p>数据处理和分析的核心库</p>
                            <div class="code-block">
                            import pandas as pd
                            
                            # 读取数据
                            df = pd.read_csv('data.csv')
                            df = pd.read_excel('data.xlsx')
                            df = pd.read_sql(query, connection)
                            
                            # 基本操作
                            df.head()          # 查看前几行
                            df.info()          # 数据信息
                            df.describe()      # 统计描述
                            </div>
                        </div>
                        
                        <div class="example-box">
                            <h5>NumPy</h5>
                            <p>数值计算基础库</p>
                            <div class="code-block">
                            import numpy as np
                            
                            # 数组操作
                            arr = np.array([1, 2, 3, 4, 5])
                            arr.mean()         # 平均值
                            arr.std()          # 标准差
                            np.percentile(arr, 50)  # 中位数
                            </div>
                        </div>
                        
                        <h3>数据清洗与处理</h3>
                        
                        <h4>缺失值处理</h4>
                        <div class="code-block">
                        # 检测缺失值
                        df.isnull().sum()
                        
                        # 删除缺失值
                        df.dropna()
                        df.dropna(subset=['column1', 'column2'])
                        
                        # 填充缺失值
                        df.fillna(0)
                        df.fillna(method='ffill')
                        df.fillna(df.mean())
                        
                        # 插值
                        df.interpolate()
                        </div>
                        
                        <h4>数据转换</h4>
                        <div class="code-block">
                        # 数据类型转换
                        df['date'] = pd.to_datetime(df['date'])
                        df['category'] = df['category'].astype('category')
                        
                        # 数据重塑
                        df.pivot_table(values='sales', index='date', columns='product')
                        df.melt(id_vars=['date'], value_vars=['A', 'B'])
                        
                        # 分组聚合
                        df.groupby('category').agg({
                            'sales': 'sum',
                            'quantity': 'mean',
                            'customer_id': 'nunique'
                        })
                        </div>
                        
                        <h3>数据分析</h3>
                        
                        <h4>统计分析</h4>
                        <div class="code-block">
                        from scipy import stats
                        
                        # 相关性分析
                        df.corr()
                        df.corr()['target'].sort_values(ascending=False)
                        
                        # 假设检验
                        stats.ttest_ind(group1, group2)
                        stats.chi2_contingency(crosstab)
                        
                        # 回归分析
                        from sklearn.linear_model import LinearRegression
                        model = LinearRegression()
                        model.fit(X, y)
                        predictions = model.predict(X_test)
                        </div>
                        
                        <h3>数据可视化</h3>
                        
                        <div class="highlight-box">
                            <h4>📊 可视化库</h4>
                            <ul>
                                <li><strong>Matplotlib：</strong>基础绘图库</li>
                                <li><strong>Seaborn：</strong>统计可视化</li>
                                <li><strong>Plotly：</strong>交互式图表</li>
                                <li><strong>Altair：</strong>声明式可视化</li>
                            </ul>
                        </div>
                        
                        <div class="code-block">
                        import matplotlib.pyplot as plt
                        import seaborn as sns
                        
                        # 设置样式
                        plt.style.use('seaborn')
                        sns.set_palette("husl")
                        
                        # 基础图表
                        df.plot(kind='bar')
                        df.plot(kind='line')
                        df.plot(kind='scatter', x='col1', y='col2')
                        
                        # Seaborn高级图表
                        sns.heatmap(df.corr(), annot=True)
                        sns.boxplot(data=df, x='category', y='value')
                        sns.pairplot(df)
                        
                        # 子图
                        fig, axes = plt.subplots(2, 2, figsize=(12, 8))
                        df.plot(ax=axes[0, 0])
                        </div>
                        
                        <h3>时间序列分析</h3>
                        
                        <div class="code-block">
                        # 时间索引
                        df.set_index('date', inplace=True)
                        
                        # 重采样
                        df.resample('M').mean()    # 月度平均
                        df.resample('W').sum()     # 周度求和
                        
                        # 移动平均
                        df.rolling(window=7).mean()
                        df.ewm(span=7).mean()      # 指数加权
                        
                        # 时间序列分解
                        from statsmodels.tsa.seasonal import seasonal_decompose
                        decomposition = seasonal_decompose(df['value'], model='additive')
                        </div>
                        
                        <h3>机器学习集成</h3>
                        
                        <div class="example-box">
                            <h5>Scikit-learn工作流</h5>
                            <div class="code-block">
                            from sklearn.model_selection import train_test_split
                            from sklearn.preprocessing import StandardScaler
                            from sklearn.ensemble import RandomForestClassifier
                            from sklearn.metrics import classification_report
                            
                            # 数据准备
                            X = df.drop('target', axis=1)
                            y = df['target']
                            
                            # 分割数据
                            X_train, X_test, y_train, y_test = train_test_split(
                                X, y, test_size=0.2, random_state=42
                            )
                            
                            # 特征缩放
                            scaler = StandardScaler()
                            X_train_scaled = scaler.fit_transform(X_train)
                            X_test_scaled = scaler.transform(X_test)
                            
                            # 模型训练
                            model = RandomForestClassifier()
                            model.fit(X_train_scaled, y_train)
                            
                            # 评估
                            predictions = model.predict(X_test_scaled)
                            print(classification_report(y_test, predictions))
                            </div>
                        </div>
                        
                        <h3>大数据处理</h3>
                        
                        <h4>并行处理</h4>
                        <div class="code-block">
                        # Dask并行处理
                        import dask.dataframe as dd
                        ddf = dd.read_csv('large_file.csv')
                        result = ddf.groupby('category').mean().compute()
                        
                        # 分块处理
                        chunk_size = 10000
                        for chunk in pd.read_csv('large_file.csv', chunksize=chunk_size):
                            process_chunk(chunk)
                        </div>
                    `,
                    "bi": `
                        <h2>BI工具应用</h2>
                        <p>商业智能（BI）工具提供了强大的数据可视化和分析能力，帮助企业做出数据驱动的决策。</p>
                        
                        <h3>主流BI工具对比</h3>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h5>Tableau</h5>
                                <div class="number">⭐⭐⭐⭐⭐</div>
                                <p>可视化领导者</p>
                            </div>
                            <div class="stat-card">
                                <h5>Power BI</h5>
                                <div class="number">⭐⭐⭐⭐⭐</div>
                                <p>性价比最高</p>
                            </div>
                            <div class="stat-card">
                                <h5>Qlik Sense</h5>
                                <div class="number">⭐⭐⭐⭐</div>
                                <p>关联模型强大</p>
                            </div>
                            <div class="stat-card">
                                <h5>Looker</h5>
                                <div class="number">⭐⭐⭐⭐</div>
                                <p>数据建模优秀</p>
                            </div>
                        </div>
                        
                        <h3>Power BI详解</h3>
                        
                        <h4>核心组件</h4>
                        <ul>
                            <li><strong>Power Query：</strong>数据连接和转换</li>
                            <li><strong>数据模型：</strong>关系建模</li>
                            <li><strong>DAX：</strong>数据分析表达式</li>
                            <li><strong>报表：</strong>可视化设计</li>
                            <li><strong>服务：</strong>云端发布和共享</li>
                        </ul>
                        
                        <h4>DAX函数示例</h4>
                        <div class="code-block">
                        // 计算度量值
                        Total Sales = SUM(Sales[Amount])
                        
                        // 时间智能
                        YTD Sales = TOTALYTD(SUM(Sales[Amount]), 'Date'[Date])
                        
                        // 同比增长
                        YoY Growth = 
                        VAR CurrentYear = SUM(Sales[Amount])
                        VAR PreviousYear = CALCULATE(
                            SUM(Sales[Amount]),
                            SAMEPERIODLASTYEAR('Date'[Date])
                        )
                        RETURN
                        DIVIDE(CurrentYear - PreviousYear, PreviousYear, 0)
                        
                        // 移动平均
                        Moving Avg = 
                        AVERAGEX(
                            DATESINPERIOD(
                                'Date'[Date],
                                LASTDATE('Date'[Date]),
                                -3,
                                MONTH
                            ),
                            [Total Sales]
                        )
                        </div>
                        
                        <h3>Tableau应用</h3>
                        
                        <h4>核心概念</h4>
                        <ul>
                            <li><strong>维度：</strong>分类型字段</li>
                            <li><strong>度量：</strong>数值型字段</li>
                            <li><strong>计算字段：</strong>自定义计算</li>
                            <li><strong>参数：</strong>动态输入</li>
                            <li><strong>集：</strong>数据子集</li>
                        </ul>
                        
                        <h4>计算字段语法</h4>
                        <div class="code-block">
                        // 条件计算
                        IF [Sales] > 1000 THEN "High"
                        ELSEIF [Sales] > 500 THEN "Medium"
                        ELSE "Low"
                        END
                        
                        // 表计算
                        WINDOW_SUM(SUM([Sales]))
                        RUNNING_SUM(SUM([Sales]))
                        
                        // LOD表达式
                        {FIXED [Category]: SUM([Sales])}
                        {INCLUDE [Product]: AVG([Price])}
                        {EXCLUDE [Region]: MAX([Profit])}
                        </div>
                        
                        <h3>BI项目实施</h3>
                        
                        <h4>实施流程</h4>
                        <ol>
                            <li><strong>需求分析：</strong>理解业务需求和KPI</li>
                            <li><strong>数据评估：</strong>评估数据源和质量</li>
                            <li><strong>架构设计：</strong>设计数据模型和ETL</li>
                            <li><strong>开发实施：</strong>构建报表和仪表板</li>
                            <li><strong>测试验证：</strong>数据准确性验证</li>
                            <li><strong>部署上线：</strong>发布和权限配置</li>
                            <li><strong>培训支持：</strong>用户培训和文档</li>
                        </ol>
                        
                        <div class="highlight-box">
                            <h4>🎯 最佳实践</h4>
                            <ul>
                                <li>建立统一的数据模型</li>
                                <li>制定命名规范</li>
                                <li>优化查询性能</li>
                                <li>实施增量更新</li>
                                <li>建立数据治理流程</li>
                                <li>定期审查和优化</li>
                            </ul>
                        </div>
                        
                        <h3>自助式分析</h3>
                        
                        <h4>赋能业务用户</h4>
                        <ul>
                            <li>提供预建数据模型</li>
                            <li>创建模板报表</li>
                            <li>设置数据权限</li>
                            <li>提供培训资源</li>
                            <li>建立支持体系</li>
                        </ul>
                        
                        <h3>云BI趋势</h3>
                        
                        <div class="example-box">
                            <h5>云端优势</h5>
                            <ul>
                                <li>弹性扩展</li>
                                <li>实时协作</li>
                                <li>移动访问</li>
                                <li>自动更新</li>
                                <li>降低成本</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <h5>新兴功能</h5>
                            <ul>
                                <li>AI增强分析</li>
                                <li>自然语言查询</li>
                                <li>自动洞察发现</li>
                                <li>预测分析集成</li>
                                <li>嵌入式分析</li>
                            </ul>
                        </div>
                    `
                }
            },
            "ml": {
                title: "机器学习基础",
                icon: "🤖",
                subtopics: {
                    "supervised": "监督学习",
                    "unsupervised": "无监督学习",
                    "evaluation": "模型评估与优化",
                    "feature": "特征工程"
                },
                content: {
                    "supervised": `
                        <h2>监督学习</h2>
                        <p>监督学习使用标记数据训练模型，学习输入特征与目标变量之间的映射关系。</p>
                        
                        <h3>分类算法</h3>
                        
                        <h4>1. 逻辑回归</h4>
                        <p>用于二分类和多分类问题的线性模型。</p>
                        <div class="code-block">
                        from sklearn.linear_model import LogisticRegression
                        
                        model = LogisticRegression()
                        model.fit(X_train, y_train)
                        predictions = model.predict(X_test)
                        probabilities = model.predict_proba(X_test)
                        </div>
                        
                        <h4>2. 决策树</h4>
                        <p>基于特征进行递归分割的树形模型。</p>
                        <ul>
                            <li>易于理解和解释</li>
                            <li>处理非线性关系</li>
                            <li>容易过拟合</li>
                        </ul>
                        
                        <h4>3. 随机森林</h4>
                        <p>多个决策树的集成模型。</p>
                        <div class="highlight-box">
                            <h4>🌲 随机森林优势</h4>
                            <ul>
                                <li>减少过拟合风险</li>
                                <li>特征重要性评估</li>
                                <li>处理缺失值</li>
                                <li>并行训练</li>
                            </ul>
                        </div>
                        
                        <h4>4. 支持向量机（SVM）</h4>
                        <p>寻找最优超平面进行分类。</p>
                        <div class="code-block">
                        from sklearn.svm import SVC
                        
                        # 不同核函数
                        svm_linear = SVC(kernel='linear')
                        svm_rbf = SVC(kernel='rbf', gamma='auto')
                        svm_poly = SVC(kernel='poly', degree=3)
                        </div>
                        
                        <h4>5. 梯度提升树（GBDT）</h4>
                        <p>逐步构建弱学习器的集成方法。</p>
                        <ul>
                            <li>XGBoost</li>
                            <li>LightGBM</li>
                            <li>CatBoost</li>
                        </ul>
                        
                        <h3>回归算法</h3>
                        
                        <h4>1. 线性回归</h4>
                        <div class="code-block">
                        from sklearn.linear_model import LinearRegression
                        
                        # 普通最小二乘法
                        lr = LinearRegression()
                        lr.fit(X_train, y_train)
                        
                        # 系数和截距
                        coefficients = lr.coef_
                        intercept = lr.intercept_
                        </div>
                        
                        <h4>2. 正则化回归</h4>
                        <ul>
                            <li><strong>Ridge（L2）：</strong>减小系数大小</li>
                            <li><strong>Lasso（L1）：</strong>特征选择</li>
                            <li><strong>ElasticNet：</strong>L1+L2组合</li>
                        </ul>
                        
                        <h4>3. 多项式回归</h4>
                        <p>捕获非线性关系。</p>
                        <div class="code-block">
                        from sklearn.preprocessing import PolynomialFeatures
                        
                        poly = PolynomialFeatures(degree=2)
                        X_poly = poly.fit_transform(X)
                        </div>
                        
                        <h3>算法选择指南</h3>
                        
                        <div class="example-box">
                            <h5>考虑因素</h5>
                            <ul>
                                <li>数据量大小</li>
                                <li>特征维度</li>
                                <li>线性/非线性关系</li>
                                <li>解释性需求</li>
                                <li>训练时间限制</li>
                                <li>预测精度要求</li>
                            </ul>
                        </div>
                    `,
                    "unsupervised": `
                        <h2>无监督学习</h2>
                        <p>无监督学习从无标签数据中发现隐藏的模式和结构。</p>
                        
                        <h3>聚类算法</h3>
                        
                        <h4>1. K-Means聚类</h4>
                        <p>将数据分成K个簇，最小化簇内平方和。</p>
                        <div class="code-block">
                        from sklearn.cluster import KMeans
                        
                        # 聚类
                        kmeans = KMeans(n_clusters=3, random_state=42)
                        clusters = kmeans.fit_predict(X)
                        
                        # 聚类中心
                        centers = kmeans.cluster_centers_
                        
                        # 评估
                        inertia = kmeans.inertia_  # 簇内平方和
                        </div>
                        
                        <h4>2. 层次聚类</h4>
                        <p>构建聚类的层次结构。</p>
                        <ul>
                            <li>凝聚型（自下而上）</li>
                            <li>分裂型（自上而下）</li>
                        </ul>
                        
                        <h4>3. DBSCAN</h4>
                        <p>基于密度的聚类，可发现任意形状的簇。</p>
                        <div class="highlight-box">
                            <h4>🔍 DBSCAN优势</h4>
                            <ul>
                                <li>无需预设簇数</li>
                                <li>识别噪声点</li>
                                <li>发现任意形状簇</li>
                                <li>对异常值鲁棒</li>
                            </ul>
                        </div>
                        
                        <h4>4. 高斯混合模型（GMM）</h4>
                        <p>假设数据由多个高斯分布组成。</p>
                        
                        <h3>降维算法</h3>
                        
                        <h4>1. 主成分分析（PCA）</h4>
                        <div class="code-block">
                        from sklearn.decomposition import PCA
                        
                        # 降到2维
                        pca = PCA(n_components=2)
                        X_reduced = pca.fit_transform(X)
                        
                        # 方差解释率
                        explained_variance = pca.explained_variance_ratio_
                        cumsum_variance = np.cumsum(explained_variance)
                        </div>
                        
                        <h4>2. t-SNE</h4>
                        <p>非线性降维，常用于可视化。</p>
                        <ul>
                            <li>保持局部结构</li>
                            <li>计算复杂度高</li>
                            <li>不适合新数据</li>
                        </ul>
                        
                        <h4>3. UMAP</h4>
                        <p>更快的非线性降维方法。</p>
                        
                        <h4>4. 自编码器</h4>
                        <p>基于神经网络的降维。</p>
                        
                        <h3>异常检测</h3>
                        
                        <div class="example-box">
                            <h5>异常检测方法</h5>
                            <ul>
                                <li>Isolation Forest</li>
                                <li>Local Outlier Factor</li>
                                <li>One-Class SVM</li>
                                <li>自编码器重构误差</li>
                            </ul>
                        </div>
                        
                        <h3>关联规则学习</h3>
                        
                        <h4>Apriori算法</h4>
                        <p>发现频繁项集和关联规则。</p>
                        <div class="code-block">
                        # 支持度、置信度、提升度
                        Support = P(A ∩ B)
                        Confidence = P(B|A) = P(A ∩ B) / P(A)
                        Lift = P(B|A) / P(B)
                        </div>
                    `,
                    "evaluation": `
                        <h2>模型评估与优化</h2>
                        <p>正确评估和优化模型是机器学习项目成功的关键。</p>
                        
                        <h3>分类模型评估</h3>
                        
                        <h4>混淆矩阵</h4>
                        <div class="code-block">
                        from sklearn.metrics import confusion_matrix, classification_report
                        
                        cm = confusion_matrix(y_true, y_pred)
                        
                        # 详细报告
                        report = classification_report(y_true, y_pred)
                        </div>
                        
                        <h4>评估指标</h4>
                        <div class="highlight-box">
                            <h4>📊 核心指标</h4>
                            <ul>
                                <li><strong>准确率：</strong>(TP+TN)/(TP+TN+FP+FN)</li>
                                <li><strong>精确率：</strong>TP/(TP+FP)</li>
                                <li><strong>召回率：</strong>TP/(TP+FN)</li>
                                <li><strong>F1分数：</strong>2×精确率×召回率/(精确率+召回率)</li>
                            </ul>
                        </div>
                        
                        <h4>ROC曲线与AUC</h4>
                        <div class="code-block">
                        from sklearn.metrics import roc_curve, auc
                        
                        fpr, tpr, thresholds = roc_curve(y_true, y_scores)
                        roc_auc = auc(fpr, tpr)
                        
                        # 绘制ROC曲线
                        plt.plot(fpr, tpr, label=f'ROC (AUC = {roc_auc:.2f})')
                        plt.plot([0, 1], [0, 1], 'k--')
                        </div>
                        
                        <h3>回归模型评估</h3>
                        
                        <h4>评估指标</h4>
                        <ul>
                            <li><strong>MAE：</strong>平均绝对误差</li>
                            <li><strong>MSE：</strong>均方误差</li>
                            <li><strong>RMSE：</strong>均方根误差</li>
                            <li><strong>R²：</strong>决定系数</li>
                            <li><strong>MAPE：</strong>平均绝对百分比误差</li>
                        </ul>
                        
                        <h3>交叉验证</h3>
                        
                        <div class="code-block">
                        from sklearn.model_selection import cross_val_score, KFold
                        
                        # K折交叉验证
                        kfold = KFold(n_splits=5, shuffle=True, random_state=42)
                        scores = cross_val_score(model, X, y, cv=kfold, scoring='accuracy')
                        
                        print(f"平均得分: {scores.mean():.3f} (+/- {scores.std():.3f})")
                        
                        # 分层K折（分类问题）
                        from sklearn.model_selection import StratifiedKFold
                        skfold = StratifiedKFold(n_splits=5)
                        </div>
                        
                        <h3>超参数优化</h3>
                        
                        <h4>1. 网格搜索</h4>
                        <div class="code-block">
                        from sklearn.model_selection import GridSearchCV
                        
                        param_grid = {
                            'n_estimators': [100, 200, 300],
                            'max_depth': [5, 10, 15],
                            'min_samples_split': [2, 5, 10]
                        }
                        
                        grid_search = GridSearchCV(
                            estimator=model,
                            param_grid=param_grid,
                            cv=5,
                            scoring='accuracy',
                            n_jobs=-1
                        )
                        
                        grid_search.fit(X_train, y_train)
                        best_params = grid_search.best_params_
                        </div>
                        
                        <h4>2. 随机搜索</h4>
                        <p>在参数空间随机采样，效率更高。</p>
                        
                        <h4>3. 贝叶斯优化</h4>
                        <p>使用贝叶斯方法智能搜索。</p>
                        
                        <h3>模型选择策略</h3>
                        
                        <div class="example-box">
                            <h5>偏差-方差权衡</h5>
                            <ul>
                                <li><strong>高偏差：</strong>欠拟合，增加模型复杂度</li>
                                <li><strong>高方差：</strong>过拟合，正则化或简化模型</li>
                            </ul>
                        </div>
                        
                        <h3>集成学习</h3>
                        
                        <h4>集成方法</h4>
                        <ul>
                            <li><strong>Bagging：</strong>并行训练，降低方差</li>
                            <li><strong>Boosting：</strong>串行训练，降低偏差</li>
                            <li><strong>Stacking：</strong>多层集成</li>
                            <li><strong>Voting：</strong>简单投票</li>
                        </ul>
                    `,
                    "feature": `
                        <h2>特征工程</h2>
                        <p>特征工程是创建、选择和转换特征的过程，对模型性能有决定性影响。</p>
                        
                        <h3>特征创建</h3>
                        
                        <h4>1. 领域知识特征</h4>
                        <ul>
                            <li>基于业务理解创建</li>
                            <li>交互特征</li>
                            <li>比率特征</li>
                            <li>时间特征</li>
                        </ul>
                        
                        <h4>2. 统计特征</h4>
                        <div class="code-block">
                        # 聚合特征
                        df.groupby('user_id').agg({
                            'amount': ['mean', 'std', 'max', 'min'],
                            'product_id': 'nunique',
                            'date': lambda x: (x.max() - x.min()).days
                        })
                        
                        # 滑动窗口特征
                        df['rolling_mean'] = df.groupby('user')['value'].transform(
                            lambda x: x.rolling(window=7, min_periods=1).mean()
                        )
                        </div>
                        
                        <h4>3. 多项式特征</h4>
                        <div class="code-block">
                        from sklearn.preprocessing import PolynomialFeatures
                        
                        poly = PolynomialFeatures(degree=2, include_bias=False)
                        X_poly = poly.fit_transform(X)
                        </div>
                        
                        <h3>特征转换</h3>
                        
                        <h4>1. 数值特征转换</h4>
                        <div class="highlight-box">
                            <h4>🔄 转换方法</h4>
                            <ul>
                                <li><strong>标准化：</strong>Z-score标准化</li>
                                <li><strong>归一化：</strong>Min-Max缩放</li>
                                <li><strong>对数变换：</strong>处理偏态分布</li>
                                <li><strong>Box-Cox：</strong>自动选择变换</li>
                                <li><strong>分箱：</strong>连续变离散</li>
                            </ul>
                        </div>
                        
                        <div class="code-block">
                        from sklearn.preprocessing import StandardScaler, MinMaxScaler
                        from scipy.stats import boxcox
                        
                        # 标准化
                        scaler = StandardScaler()
                        X_scaled = scaler.fit_transform(X)
                        
                        # 归一化
                        minmax = MinMaxScaler()
                        X_normalized = minmax.fit_transform(X)
                        
                        # Box-Cox变换
                        X_transformed, lambda_param = boxcox(X + 1)
                        </div>
                        
                        <h4>2. 类别特征编码</h4>
                        
                        <div class="example-box">
                            <h5>编码方法</h5>
                            <ul>
                                <li><strong>One-Hot编码：</strong>适合低基数特征</li>
                                <li><strong>标签编码：</strong>有序类别</li>
                                <li><strong>目标编码：</strong>基于目标变量</li>
                                <li><strong>频率编码：</strong>基于出现频率</li>
                                <li><strong>嵌入：</strong>高基数特征</li>
                            </ul>
                        </div>
                        
                        <h3>特征选择</h3>
                        
                        <h4>1. 过滤法</h4>
                        <div class="code-block">
                        from sklearn.feature_selection import SelectKBest, f_classif
                        
                        # 选择K个最佳特征
                        selector = SelectKBest(score_func=f_classif, k=10)
                        X_selected = selector.fit_transform(X, y)
                        
                        # 获取特征得分
                        scores = selector.scores_
                        </div>
                        
                        <h4>2. 包装法</h4>
                        <ul>
                            <li>递归特征消除（RFE）</li>
                            <li>前向选择</li>
                            <li>后向消除</li>
                        </ul>
                        
                        <h4>3. 嵌入法</h4>
                        <ul>
                            <li>L1正则化</li>
                            <li>树模型特征重要性</li>
                            <li>排列重要性</li>
                        </ul>
                        
                        <h3>特征处理管道</h3>
                        
                        <div class="code-block">
                        from sklearn.pipeline import Pipeline
                        from sklearn.compose import ColumnTransformer
                        
                        # 数值特征处理
                        numeric_features = ['age', 'income']
                        numeric_transformer = Pipeline(steps=[
                            ('imputer', SimpleImputer(strategy='median')),
                            ('scaler', StandardScaler())
                        ])
                        
                        # 类别特征处理
                        categorical_features = ['city', 'category']
                        categorical_transformer = Pipeline(steps=[
                            ('imputer', SimpleImputer(strategy='constant', fill_value='missing')),
                            ('onehot', OneHotEncoder(handle_unknown='ignore'))
                        ])
                        
                        # 组合处理器
                        preprocessor = ColumnTransformer(
                            transformers=[
                                ('num', numeric_transformer, numeric_features),
                                ('cat', categorical_transformer, categorical_features)
                            ])
                        
                        # 完整管道
                        clf = Pipeline(steps=[
                            ('preprocessor', preprocessor),
                            ('classifier', RandomForestClassifier())
                        ])
                        </div>
                        
                        <h3>特征工程最佳实践</h3>
                        
                        <div class="highlight-box">
                            <h4>✅ 注意事项</h4>
                            <ul>
                                <li>避免数据泄露</li>
                                <li>处理类别不平衡</li>
                                <li>验证特征有效性</li>
                                <li>监控特征漂移</li>
                                <li>文档化特征定义</li>
                            </ul>
                        </div>
                    `
                }
            },
            "business": {
                title: "业务分析方法",
                icon: "💼",
                subtopics: {
                    "user": "用户行为分析",
                    "funnel": "漏斗分析",
                    "cohort": "同期群分析",
                    "ab": "A/B测试"
                },
                content: {
                    "user": `
                        <h2>用户行为分析</h2>
                        <p>深入理解用户行为模式，优化产品体验和业务策略。</p>
                        
                        <h3>用户行为指标体系</h3>
                        
                        <h4>活跃度指标</h4>
                        <ul>
                            <li><strong>DAU：</strong>日活跃用户数</li>
                            <li><strong>MAU：</strong>月活跃用户数</li>
                            <li><strong>DAU/MAU：</strong>用户粘性指标</li>
                            <li><strong>会话时长：</strong>平均使用时长</li>
                            <li><strong>会话频次：</strong>使用频率</li>
                        </ul>
                        
                        <h4>留存指标</h4>
                        <div class="highlight-box">
                            <h4>📈 留存率计算</h4>
                            <ul>
                                <li>次日留存：第2天回访用户/第1天新用户</li>
                                <li>7日留存：第8天回访用户/第1天新用户</li>
                                <li>30日留存：第31天回访用户/第1天新用户</li>
                            </ul>
                        </div>
                        
                        <h3>用户路径分析</h3>
                        
                        <h4>路径分析方法</h4>
                        <ul>
                            <li><strong>桑基图：</strong>可视化用户流向</li>
                            <li><strong>热力图：</strong>页面点击分布</li>
                            <li><strong>会话重放：</strong>回放用户操作</li>
                            <li><strong>路径挖掘：</strong>发现常见路径</li>
                        </ul>
                        
                        <h4>关键路径识别</h4>
                        <div class="code-block">
                        # Python示例：路径分析
                        # 计算路径转化率
                        def calculate_path_conversion(df):
                            paths = df.groupby('session_id')['page'].apply(list)
                            
                            # 统计路径频次
                            path_counts = paths.value_counts()
                            
                            # 计算转化路径
                            conversion_paths = paths[
                                paths.apply(lambda x: 'purchase' in x)
                            ]
                            
                            return path_counts, conversion_paths
                        </div>
                        
                        <h3>用户分群</h3>
                        
                        <h4>RFM模型</h4>
                        <div class="example-box">
                            <h5>RFM维度</h5>
                            <ul>
                                <li><strong>Recency：</strong>最近一次消费时间</li>
                                <li><strong>Frequency：</strong>消费频率</li>
                                <li><strong>Monetary：</strong>消费金额</li>
                            </ul>
                        </div>
                        
                        <h4>用户生命周期</h4>
                        <ul>
                            <li>新用户期</li>
                            <li>成长期</li>
                            <li>成熟期</li>
                            <li>衰退期</li>
                            <li>流失期</li>
                        </ul>
                        
                        <h3>行为预测模型</h3>
                        
                        <h4>流失预测</h4>
                        <ul>
                            <li>特征：登录频次、使用时长、功能使用</li>
                            <li>模型：逻辑回归、随机森林、XGBoost</li>
                            <li>应用：预警和干预</li>
                        </ul>
                        
                        <h4>转化预测</h4>
                        <ul>
                            <li>预测购买概率</li>
                            <li>推荐最佳时机</li>
                            <li>个性化营销</li>
                        </ul>
                    `,
                    "funnel": `
                        <h2>漏斗分析</h2>
                        <p>漏斗分析帮助识别用户转化过程中的瓶颈，优化转化路径。</p>
                        
                        <h3>漏斗模型构建</h3>
                        
                        <h4>定义漏斗步骤</h4>
                        <div class="example-box">
                            <h5>电商漏斗示例</h5>
                            <ol>
                                <li>访问首页</li>
                                <li>浏览商品</li>
                                <li>加入购物车</li>
                                <li>开始结账</li>
                                <li>完成支付</li>
                            </ol>
                        </div>
                        
                        <h4>计算转化率</h4>
                        <div class="code-block">
                        # 漏斗分析计算
                        def calculate_funnel(df, steps):
                            funnel_data = []
                            
                            for i, step in enumerate(steps):
                                users = df[df['event'] == step]['user_id'].nunique()
                                
                                if i == 0:
                                    conversion_rate = 100
                                else:
                                    prev_users = funnel_data[i-1]['users']
                                    conversion_rate = (users / prev_users * 100) if prev_users > 0 else 0
                                
                                funnel_data.append({
                                    'step': step,
                                    'users': users,
                                    'conversion_rate': conversion_rate
                                })
                            
                            return pd.DataFrame(funnel_data)
                        </div>
                        
                        <h3>漏斗优化策略</h3>
                        
                        <h4>识别瓶颈</h4>
                        <ul>
                            <li>最大流失点</li>
                            <li>异常转化率</li>
                            <li>用户反馈分析</li>
                            <li>竞品对比</li>
                        </ul>
                        
                        <h4>优化方法</h4>
                        <div class="highlight-box">
                            <h4>🎯 优化策略</h4>
                            <ul>
                                <li>简化流程：减少步骤</li>
                                <li>改善体验：优化界面</li>
                                <li>增加引导：提供帮助</li>
                                <li>消除疑虑：增加信任元素</li>
                                <li>个性化：定制化体验</li>
                            </ul>
                        </div>
                        
                        <h3>多维度漏斗分析</h3>
                        
                        <h4>分维度对比</h4>
                        <ul>
                            <li>设备类型（PC/移动）</li>
                            <li>用户来源</li>
                            <li>用户属性</li>
                            <li>时间周期</li>
                        </ul>
                        
                        <h3>微转化漏斗</h3>
                        
                        <p>关注细节步骤的转化：</p>
                        <ul>
                            <li>表单填写完成率</li>
                            <li>视频播放完成率</li>
                            <li>页面滚动深度</li>
                            <li>功能使用率</li>
                        </ul>
                    `,
                    "cohort": `
                        <h2>同期群分析</h2>
                        <p>同期群分析通过分组比较不同时期用户群体的行为，揭示业务趋势和用户生命周期价值。</p>
                        
                        <h3>同期群定义</h3>
                        
                        <h4>分组维度</h4>
                        <ul>
                            <li><strong>获取时间：</strong>注册月份/周</li>
                            <li><strong>行为特征：</strong>首次购买时间</li>
                            <li><strong>用户属性：</strong>地区、渠道</li>
                            <li><strong>产品版本：</strong>使用版本</li>
                        </ul>
                        
                        <h3>留存分析</h3>
                        
                        <div class="code-block">
                        # 同期群留存计算
                        def cohort_retention(df):
                            # 确定用户首次活动时间
                            df['cohort'] = df.groupby('user_id')['date'].transform('min')
                            df['cohort'] = pd.to_datetime(df['cohort']).dt.to_period('M')
                            
                            # 计算相对时间
                            df['period'] = (df['date'].dt.to_period('M') - df['cohort']).apply(lambda x: x.n)
                            
                            # 生成留存矩阵
                            cohort_data = df.groupby(['cohort', 'period'])['user_id'].nunique()
                            cohort_matrix = cohort_data.unstack(fill_value=0)
                            
                            # 计算留存率
                            cohort_size = cohort_matrix.iloc[:, 0]
                            retention_matrix = cohort_matrix.divide(cohort_size, axis=0) * 100
                            
                            return retention_matrix
                        </div>
                        
                        <h3>LTV分析</h3>
                        
                        <h4>生命周期价值计算</h4>
                        <div class="highlight-box">
                            <h4>💰 LTV公式</h4>
                            <p>LTV = 平均订单价值 × 购买频率 × 用户生命周期</p>
                            <p>LTV = ARPU × 用户生命周期月数</p>
                        </div>
                        
                        <h3>同期群对比</h3>
                        
                        <h4>分析维度</h4>
                        <ul>
                            <li>不同渠道获客质量</li>
                            <li>产品迭代效果</li>
                            <li>季节性影响</li>
                            <li>营销活动效果</li>
                        </ul>
                        
                        <h3>可视化展示</h3>
                        
                        <h4>热力图展示</h4>
                        <p>使用颜色深浅表示留存率高低，直观展示用户流失趋势。</p>
                    `,
                    "ab": `
                        <h2>A/B测试</h2>
                        <p>A/B测试是通过对照实验来评估产品改动效果的科学方法。</p>
                        
                        <h3>实验设计</h3>
                        
                        <h4>设计原则</h4>
                        <ul>
                            <li><strong>单一变量：</strong>每次只改变一个因素</li>
                            <li><strong>随机分组：</strong>确保组间可比性</li>
                            <li><strong>样本量充足：</strong>达到统计功效</li>
                            <li><strong>运行时长：</strong>覆盖业务周期</li>
                        </ul>
                        
                        <h3>样本量计算</h3>
                        
                        <div class="code-block">
                        import statsmodels.stats.power as smp
                        
                        # 计算所需样本量
                        def calculate_sample_size(baseline_rate, min_effect, alpha=0.05, power=0.8):
                            effect_size = smp.proportion_effectsize(
                                baseline_rate, 
                                baseline_rate + min_effect
                            )
                            
                            sample_size = smp.zt_ind_solve_power(
                                effect_size=effect_size,
                                alpha=alpha,
                                power=power,
                                alternative='two-sided'
                            )
                            
                            return int(np.ceil(sample_size))
                        </div>
                        
                        <h3>结果分析</h3>
                        
                        <h4>统计检验</h4>
                        <div class="highlight-box">
                            <h4>📊 检验方法</h4>
                            <ul>
                                <li>比例检验：转化率对比</li>
                                <li>t检验：均值对比</li>
                                <li>卡方检验：分类数据</li>
                                <li>Mann-Whitney U：非参数检验</li>
                            </ul>
                        </div>
                        
                        <h4>置信区间</h4>
                        <p>不仅关注p值，还要计算效果大小的置信区间。</p>
                        
                        <h3>常见陷阱</h3>
                        
                        <h4>避免的错误</h4>
                        <ul>
                            <li><strong>过早结束：</strong>未达到样本量</li>
                            <li><strong>多重检验：</strong>频繁查看结果</li>
                            <li><strong>辛普森悖论：</strong>分组效应</li>
                            <li><strong>新奇效应：</strong>短期效应</li>
                            <li><strong>样本污染：</strong>用户跨组</li>
                        </ul>
                        
                        <h3>高级方法</h3>
                        
                        <h4>多变量测试</h4>
                        <p>同时测试多个变量的组合效果。</p>
                        
                        <h4>贝叶斯A/B测试</h4>
                        <p>使用贝叶斯方法，提供更直观的结果解释。</p>
                        
                        <h4>分层实验</h4>
                        <p>同时运行多个不冲突的实验。</p>
                    `
                }
            },
            "advanced": {
                title: "高级分析技术",
                icon: "🚀",
                subtopics: {
                    "timeseries": "时间序列分析",
                    "prediction": "预测分析",
                    "text": "文本分析",
                    "recommendation": "推荐系统"
                },
                content: {
                    "timeseries": `
                        <h2>时间序列分析</h2>
                        <p>时间序列分析用于分析按时间顺序排列的数据，发现趋势、季节性和预测未来。</p>
                        
                        <h3>时间序列组成</h3>
                        
                        <h4>基本成分</h4>
                        <ul>
                            <li><strong>趋势（Trend）：</strong>长期方向</li>
                            <li><strong>季节性（Seasonality）：</strong>周期性模式</li>
                            <li><strong>周期性（Cyclical）：</strong>非固定周期波动</li>
                            <li><strong>随机性（Random）：</strong>不规则变动</li>
                        </ul>
                        
                        <h3>平稳性检验</h3>
                        
                        <div class="code-block">
                        from statsmodels.tsa.stattools import adfuller
                        
                        # ADF检验
                        def adf_test(series):
                            result = adfuller(series)
                            print(f'ADF Statistic: {result[0]}')
                            print(f'p-value: {result[1]}')
                            
                            if result[1] <= 0.05:
                                print("序列平稳")
                            else:
                                print("序列非平稳")
                        </div>
                        
                        <h3>ARIMA模型</h3>
                        
                        <h4>模型参数</h4>
                        <ul>
                            <li><strong>AR(p)：</strong>自回归项</li>
                            <li><strong>I(d)：</strong>差分阶数</li>
                            <li><strong>MA(q)：</strong>移动平均项</li>
                        </ul>
                        
                        <div class="code-block">
                        from statsmodels.tsa.arima.model import ARIMA
                        
                        # 模型拟合
                        model = ARIMA(data, order=(p, d, q))
                        model_fit = model.fit()
                        
                        # 预测
                        forecast = model_fit.forecast(steps=10)
                        </div>
                        
                        <h3>季节性分解</h3>
                        
                        <h4>STL分解</h4>
                        <p>将时间序列分解为趋势、季节和残差。</p>
                        
                        <h3>Prophet模型</h3>
                        
                        <div class="highlight-box">
                            <h4>🔮 Prophet优势</h4>
                            <ul>
                                <li>自动处理缺失值</li>
                                <li>捕获多种季节性</li>
                                <li>考虑节假日效应</li>
                                <li>易于使用和解释</li>
                            </ul>
                        </div>
                    `,
                    "prediction": `
                        <h2>预测分析</h2>
                        <p>预测分析使用历史数据和统计算法来预测未来事件的可能性。</p>
                        
                        <h3>预测方法分类</h3>
                        
                        <h4>定量预测</h4>
                        <ul>
                            <li>时间序列方法</li>
                            <li>因果关系模型</li>
                            <li>机器学习方法</li>
                        </ul>
                        
                        <h4>定性预测</h4>
                        <ul>
                            <li>专家判断</li>
                            <li>德尔菲法</li>
                            <li>情景分析</li>
                        </ul>
                        
                        <h3>需求预测</h3>
                        
                        <h4>预测模型</h4>
                        <div class="example-box">
                            <h5>常用模型</h5>
                            <ul>
                                <li>移动平均</li>
                                <li>指数平滑</li>
                                <li>回归分析</li>
                                <li>神经网络</li>
                                <li>集成方法</li>
                            </ul>
                        </div>
                        
                        <h3>预测评估</h3>
                        
                        <h4>评估指标</h4>
                        <div class="code-block">
                        from sklearn.metrics import mean_absolute_error, mean_squared_error
                        
                        # MAE
                        mae = mean_absolute_error(y_true, y_pred)
                        
                        # RMSE
                        rmse = np.sqrt(mean_squared_error(y_true, y_pred))
                        
                        # MAPE
                        mape = np.mean(np.abs((y_true - y_pred) / y_true)) * 100
                        </div>
                        
                        <h3>场景应用</h3>
                        
                        <ul>
                            <li>销售预测</li>
                            <li>库存优化</li>
                            <li>财务预测</li>
                            <li>客户流失预测</li>
                            <li>风险评估</li>
                        </ul>
                    `,
                    "text": `
                        <h2>文本分析</h2>
                        <p>文本分析从非结构化文本数据中提取有价值的信息和洞察。</p>
                        
                        <h3>文本预处理</h3>
                        
                        <div class="code-block">
                        import nltk
                        from nltk.tokenize import word_tokenize
                        from nltk.corpus import stopwords
                        from nltk.stem import WordNetLemmatizer
                        
                        # 文本清洗流程
                        def preprocess_text(text):
                            # 转小写
                            text = text.lower()
                            
                            # 分词
                            tokens = word_tokenize(text)
                            
                            # 去除停用词
                            stop_words = set(stopwords.words('english'))
                            tokens = [t for t in tokens if t not in stop_words]
                            
                            # 词形还原
                            lemmatizer = WordNetLemmatizer()
                            tokens = [lemmatizer.lemmatize(t) for t in tokens]
                            
                            return tokens
                        </div>
                        
                        <h3>文本表示</h3>
                        
                        <h4>向量化方法</h4>
                        <ul>
                            <li><strong>词袋模型：</strong>忽略顺序</li>
                            <li><strong>TF-IDF：</strong>考虑词频和文档频率</li>
                            <li><strong>Word2Vec：</strong>词嵌入</li>
                            <li><strong>BERT：</strong>上下文嵌入</li>
                        </ul>
                        
                        <h3>情感分析</h3>
                        
                        <div class="highlight-box">
                            <h4>😊 情感分析应用</h4>
                            <ul>
                                <li>产品评论分析</li>
                                <li>社交媒体监控</li>
                                <li>客户反馈分析</li>
                                <li>品牌声誉管理</li>
                            </ul>
                        </div>
                        
                        <h3>主题建模</h3>
                        
                        <h4>LDA主题模型</h4>
                        <p>发现文档集合中的潜在主题。</p>
                        
                        <h3>命名实体识别</h3>
                        
                        <p>识别文本中的人名、地名、组织名等实体。</p>
                    `,
                    "recommendation": `
                        <h2>推荐系统</h2>
                        <p>推荐系统通过分析用户行为和偏好，为用户推荐个性化的内容或产品。</p>
                        
                        <h3>推荐算法类型</h3>
                        
                        <h4>1. 协同过滤</h4>
                        
                        <div class="example-box">
                            <h5>基于用户的协同过滤</h5>
                            <p>找到相似用户，推荐他们喜欢的物品。</p>
                        </div>
                        
                        <div class="example-box">
                            <h5>基于物品的协同过滤</h5>
                            <p>推荐与用户历史偏好相似的物品。</p>
                        </div>
                        
                        <h4>2. 基于内容的推荐</h4>
                        <p>根据物品特征推荐相似物品。</p>
                        
                        <h4>3. 混合推荐</h4>
                        <p>结合多种推荐策略。</p>
                        
                        <h3>矩阵分解</h3>
                        
                        <div class="code-block">
                        from sklearn.decomposition import NMF
                        
                        # 非负矩阵分解
                        model = NMF(n_components=10)
                        W = model.fit_transform(user_item_matrix)
                        H = model.components_
                        
                        # 重构评分矩阵
                        predicted_ratings = np.dot(W, H)
                        </div>
                        
                        <h3>深度学习推荐</h3>
                        
                        <ul>
                            <li>神经协同过滤</li>
                            <li>Wide & Deep模型</li>
                            <li>注意力机制</li>
                            <li>图神经网络</li>
                        </ul>
                        
                        <h3>评估指标</h3>
                        
                        <div class="highlight-box">
                            <h4>📊 推荐系统指标</h4>
                            <ul>
                                <li><strong>准确率：</strong>推荐的准确性</li>
                                <li><strong>召回率：</strong>覆盖用户兴趣</li>
                                <li><strong>覆盖率：</strong>推荐物品的多样性</li>
                                <li><strong>新颖性：</strong>推荐新内容</li>
                                <li><strong>多样性：</strong>推荐的差异化</li>
                            </ul>
                        </div>
                        
                        <h3>冷启动问题</h3>
                        
                        <h4>解决方案</h4>
                        <ul>
                            <li>利用用户画像</li>
                            <li>流行度推荐</li>
                            <li>探索与利用平衡</li>
                            <li>迁移学习</li>
                        </ul>
                    `
                }
            }
        };
        
        // 生成菜单
        function generateMenu() {
            const menuContainer = document.getElementById('menu');
            
            Object.keys(knowledgeBase).forEach(categoryKey => {
                const category = knowledgeBase[categoryKey];
                
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item';
                menuItem.dataset.category = categoryKey;
                
                const menuTitle = document.createElement('div');
                menuTitle.className = 'menu-title';
                menuTitle.innerHTML = `
                    <span>${category.icon} ${category.title}</span>
                    <span class="arrow">▶</span>
                `;
                menuTitle.onclick = () => toggleCategory(categoryKey);
                
                const submenu = document.createElement('div');
                submenu.className = 'submenu';
                
                Object.keys(category.subtopics).forEach(topicKey => {
                    const submenuItem = document.createElement('div');
                    submenuItem.className = 'submenu-item';
                    submenuItem.textContent = category.subtopics[topicKey];
                    submenuItem.onclick = () => loadContent(categoryKey, topicKey);
                    submenu.appendChild(submenuItem);
                });
                
                menuItem.appendChild(menuTitle);
                menuItem.appendChild(submenu);
                menuContainer.appendChild(menuItem);
            });
        }
        
        // 切换分类展开/收起
        function toggleCategory(categoryKey) {
            const menuItem = document.querySelector(`[data-category="${categoryKey}"]`);
            menuItem.classList.toggle('expanded');
            
            // 如果是第一次展开，加载第一个子主题
            if (menuItem.classList.contains('expanded')) {
                const firstTopicKey = Object.keys(knowledgeBase[categoryKey].subtopics)[0];
                loadContent(categoryKey, firstTopicKey);
            }
        }
        
        // 加载内容
        function loadContent(categoryKey, topicKey) {
            // 更新菜单状态
            document.querySelectorAll('.submenu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.querySelectorAll('.menu-title').forEach(item => {
                item.classList.remove('active');
            });
            
            const currentMenuItem = document.querySelector(`[data-category="${categoryKey}"]`);
            currentMenuItem.querySelector('.menu-title').classList.add('active');
            
            const submenuItems = currentMenuItem.querySelectorAll('.submenu-item');
            const topicIndex = Object.keys(knowledgeBase[categoryKey].subtopics).indexOf(topicKey);
            if (submenuItems[topicIndex]) {
                submenuItems[topicIndex].classList.add('active');
            }
            
            // 加载内容
            const mainContent = document.getElementById('mainContent');
            const content = knowledgeBase[categoryKey].content[topicKey];
            
            if (content) {
                mainContent.innerHTML = `
                    <div class="content-section active">
                        ${content}
                    </div>
                `;
            }
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            generateMenu();
            
            // 默认展开第一个分类并加载内容
            const firstCategory = Object.keys(knowledgeBase)[0];
            const firstTopic = Object.keys(knowledgeBase[firstCategory].subtopics)[0];
            
            toggleCategory(firstCategory);
            loadContent(firstCategory, firstTopic);
        });
    </script>
</body>
</html>